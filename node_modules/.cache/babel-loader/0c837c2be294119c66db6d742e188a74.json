{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/OpenCerts/demo-opencerts-renderer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _createForOfIteratorHelper = require(\"/OpenCerts/demo-opencerts-renderer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _toConsumableArray = require(\"/OpenCerts/demo-opencerts-renderer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(loadPluginDescriptor),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(loadPresetDescriptor);\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nfunction _gensync() {\n  var data = _interopRequireDefault(require(\"gensync\"));\n\n  _gensync = function _gensync() {\n    return data;\n  };\n\n  return data;\n}\n\nvar _async = require(\"../gensync-utils/async\");\n\nvar _util = require(\"./util\");\n\nvar context = _interopRequireWildcard(require(\"../index\"));\n\nvar _plugin = _interopRequireDefault(require(\"./plugin\"));\n\nvar _item = require(\"./item\");\n\nvar _configChain = require(\"./config-chain\");\n\nfunction _traverse() {\n  var data = _interopRequireDefault(require(\"@babel/traverse\"));\n\n  _traverse = function _traverse() {\n    return data;\n  };\n\n  return data;\n}\n\nvar _caching = require(\"./caching\");\n\nvar _options = require(\"./validation/options\");\n\nvar _plugins = require(\"./validation/plugins\");\n\nvar _configApi = _interopRequireDefault(require(\"./helpers/config-api\"));\n\nvar _partial = _interopRequireDefault(require(\"./partial\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar _default = (0, _gensync().default)( /*#__PURE__*/_regeneratorRuntime.mark(function loadFullConfig(inputOpts) {\n  var result, options, context, optionDefaults, passes, plugins, presets, ignored, opts;\n  return _regeneratorRuntime.wrap(function loadFullConfig$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          return _context2.delegateYield((0, _partial.default)(inputOpts), \"t0\", 1);\n\n        case 1:\n          result = _context2.t0;\n\n          if (result) {\n            _context2.next = 4;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", null);\n\n        case 4:\n          options = result.options, context = result.context;\n          optionDefaults = {};\n          passes = [[]];\n          _context2.prev = 7;\n          plugins = options.plugins, presets = options.presets;\n\n          if (!(!plugins || !presets)) {\n            _context2.next = 11;\n            break;\n          }\n\n          throw new Error(\"Assertion failure - plugins and presets exist\");\n\n        case 11:\n          return _context2.delegateYield( /*#__PURE__*/_regeneratorRuntime.mark(function recurseDescriptors(config, pass) {\n            var plugins, i, descriptor, presets, _i, _descriptor, _iterator, _step, _step$value, preset, _pass, _ignored;\n\n            return _regeneratorRuntime.wrap(function recurseDescriptors$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    plugins = [];\n                    i = 0;\n\n                  case 2:\n                    if (!(i < config.plugins.length)) {\n                      _context.next = 19;\n                      break;\n                    }\n\n                    descriptor = config.plugins[i];\n\n                    if (!(descriptor.options !== false)) {\n                      _context.next = 16;\n                      break;\n                    }\n\n                    _context.prev = 5;\n                    _context.t0 = plugins;\n                    return _context.delegateYield(loadPluginDescriptor(descriptor, context), \"t1\", 8);\n\n                  case 8:\n                    _context.t2 = _context.t1;\n\n                    _context.t0.push.call(_context.t0, _context.t2);\n\n                    _context.next = 16;\n                    break;\n\n                  case 12:\n                    _context.prev = 12;\n                    _context.t3 = _context[\"catch\"](5);\n\n                    if (i > 0 && _context.t3.code === \"BABEL_UNKNOWN_PLUGIN_PROPERTY\") {\n                      (0, _options.checkNoUnwrappedItemOptionPairs)(config.plugins[i - 1], descriptor, \"plugin\", i, _context.t3);\n                    }\n\n                    throw _context.t3;\n\n                  case 16:\n                    i++;\n                    _context.next = 2;\n                    break;\n\n                  case 19:\n                    presets = [];\n                    _i = 0;\n\n                  case 21:\n                    if (!(_i < config.presets.length)) {\n                      _context.next = 40;\n                      break;\n                    }\n\n                    _descriptor = config.presets[_i];\n\n                    if (!(_descriptor.options !== false)) {\n                      _context.next = 37;\n                      break;\n                    }\n\n                    _context.prev = 24;\n                    _context.t4 = presets;\n                    return _context.delegateYield(loadPresetDescriptor(_descriptor, context), \"t5\", 27);\n\n                  case 27:\n                    _context.t6 = _context.t5;\n                    _context.t7 = _descriptor.ownPass ? [] : pass;\n                    _context.t8 = {\n                      preset: _context.t6,\n                      pass: _context.t7\n                    };\n\n                    _context.t4.push.call(_context.t4, _context.t8);\n\n                    _context.next = 37;\n                    break;\n\n                  case 33:\n                    _context.prev = 33;\n                    _context.t9 = _context[\"catch\"](24);\n\n                    if (_i > 0 && _context.t9.code === \"BABEL_UNKNOWN_OPTION\") {\n                      (0, _options.checkNoUnwrappedItemOptionPairs)(config.presets[_i - 1], _descriptor, \"preset\", _i, _context.t9);\n                    }\n\n                    throw _context.t9;\n\n                  case 37:\n                    _i++;\n                    _context.next = 21;\n                    break;\n\n                  case 40:\n                    if (!(presets.length > 0)) {\n                      _context.next = 64;\n                      break;\n                    }\n\n                    passes.splice.apply(passes, [1, 0].concat(_toConsumableArray(presets.map(function (o) {\n                      return o.pass;\n                    }).filter(function (p) {\n                      return p !== pass;\n                    }))));\n                    _iterator = _createForOfIteratorHelper(presets);\n                    _context.prev = 43;\n\n                    _iterator.s();\n\n                  case 45:\n                    if ((_step = _iterator.n()).done) {\n                      _context.next = 56;\n                      break;\n                    }\n\n                    _step$value = _step.value, preset = _step$value.preset, _pass = _step$value.pass;\n\n                    if (preset) {\n                      _context.next = 49;\n                      break;\n                    }\n\n                    return _context.abrupt(\"return\", true);\n\n                  case 49:\n                    return _context.delegateYield(recurseDescriptors({\n                      plugins: preset.plugins,\n                      presets: preset.presets\n                    }, _pass), \"t10\", 50);\n\n                  case 50:\n                    _ignored = _context.t10;\n\n                    if (!_ignored) {\n                      _context.next = 53;\n                      break;\n                    }\n\n                    return _context.abrupt(\"return\", true);\n\n                  case 53:\n                    preset.options.forEach(function (opts) {\n                      (0, _util.mergeOptions)(optionDefaults, opts);\n                    });\n\n                  case 54:\n                    _context.next = 45;\n                    break;\n\n                  case 56:\n                    _context.next = 61;\n                    break;\n\n                  case 58:\n                    _context.prev = 58;\n                    _context.t11 = _context[\"catch\"](43);\n\n                    _iterator.e(_context.t11);\n\n                  case 61:\n                    _context.prev = 61;\n\n                    _iterator.f();\n\n                    return _context.finish(61);\n\n                  case 64:\n                    if (plugins.length > 0) {\n                      pass.unshift.apply(pass, plugins);\n                    }\n\n                  case 65:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, recurseDescriptors, null, [[5, 12], [24, 33], [43, 58, 61, 64]]);\n          })({\n            plugins: plugins.map(function (item) {\n              var desc = (0, _item.getItemDescriptor)(item);\n\n              if (!desc) {\n                throw new Error(\"Assertion failure - must be config item\");\n              }\n\n              return desc;\n            }),\n            presets: presets.map(function (item) {\n              var desc = (0, _item.getItemDescriptor)(item);\n\n              if (!desc) {\n                throw new Error(\"Assertion failure - must be config item\");\n              }\n\n              return desc;\n            })\n          }, passes[0]), \"t1\", 12);\n\n        case 12:\n          ignored = _context2.t1;\n\n          if (!ignored) {\n            _context2.next = 15;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", null);\n\n        case 15:\n          _context2.next = 21;\n          break;\n\n        case 17:\n          _context2.prev = 17;\n          _context2.t2 = _context2[\"catch\"](7);\n\n          if (!/^\\[BABEL\\]/.test(_context2.t2.message)) {\n            _context2.t2.message = \"[BABEL] \".concat(context.filename || \"unknown\", \": \").concat(_context2.t2.message);\n          }\n\n          throw _context2.t2;\n\n        case 21:\n          opts = optionDefaults;\n          (0, _util.mergeOptions)(opts, options);\n          opts.plugins = passes[0];\n          opts.presets = passes.slice(1).filter(function (plugins) {\n            return plugins.length > 0;\n          }).map(function (plugins) {\n            return {\n              plugins: plugins\n            };\n          });\n          opts.passPerPreset = opts.presets.length > 0;\n          return _context2.abrupt(\"return\", {\n            options: opts,\n            passes: passes\n          });\n\n        case 27:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, loadFullConfig, null, [[7, 17]]);\n}));\n\nexports.default = _default;\nvar loadDescriptor = (0, _caching.makeWeakCache)( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref, cache) {\n  var value, options, dirname, alias, item, api;\n  return _regeneratorRuntime.wrap(function _callee$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          value = _ref.value, options = _ref.options, dirname = _ref.dirname, alias = _ref.alias;\n\n          if (!(options === false)) {\n            _context3.next = 3;\n            break;\n          }\n\n          throw new Error(\"Assertion failure\");\n\n        case 3:\n          options = options || {};\n          item = value;\n\n          if (!(typeof value === \"function\")) {\n            _context3.next = 15;\n            break;\n          }\n\n          api = Object.assign({}, context, {}, (0, _configApi.default)(cache));\n          _context3.prev = 7;\n          item = value(api, options, dirname);\n          _context3.next = 15;\n          break;\n\n        case 11:\n          _context3.prev = 11;\n          _context3.t0 = _context3[\"catch\"](7);\n\n          if (alias) {\n            _context3.t0.message += \" (While processing: \".concat(JSON.stringify(alias), \")\");\n          }\n\n          throw _context3.t0;\n\n        case 15:\n          if (!(!item || typeof item !== \"object\")) {\n            _context3.next = 17;\n            break;\n          }\n\n          throw new Error(\"Plugin/Preset did not return an object.\");\n\n        case 17:\n          if (!(typeof item.then === \"function\")) {\n            _context3.next = 20;\n            break;\n          }\n\n          return _context3.delegateYield([], \"t1\", 19);\n\n        case 19:\n          throw new Error(\"You appear to be using an async plugin, \" + \"which your current version of Babel does not support. \" + \"If you're using a published plugin, \" + \"you may need to upgrade your @babel/core version.\");\n\n        case 20:\n          return _context3.abrupt(\"return\", {\n            value: item,\n            options: options,\n            dirname: dirname,\n            alias: alias\n          });\n\n        case 21:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _callee, null, [[7, 11]]);\n}));\n\nfunction loadPluginDescriptor(descriptor, context) {\n  return _regeneratorRuntime.wrap(function loadPluginDescriptor$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          if (!(descriptor.value instanceof _plugin.default)) {\n            _context4.next = 4;\n            break;\n          }\n\n          if (!descriptor.options) {\n            _context4.next = 3;\n            break;\n          }\n\n          throw new Error(\"Passed options to an existing Plugin instance will not work.\");\n\n        case 3:\n          return _context4.abrupt(\"return\", descriptor.value);\n\n        case 4:\n          _context4.t0 = instantiatePlugin;\n          return _context4.delegateYield(loadDescriptor(descriptor, context), \"t1\", 6);\n\n        case 6:\n          _context4.t2 = _context4.t1;\n          _context4.t3 = context;\n          return _context4.delegateYield((0, _context4.t0)(_context4.t2, _context4.t3), \"t4\", 9);\n\n        case 9:\n          return _context4.abrupt(\"return\", _context4.t4);\n\n        case 10:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked);\n}\n\nvar instantiatePlugin = (0, _caching.makeWeakCache)( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref2, cache) {\n  var value, options, dirname, alias, pluginObj, plugin, inheritsDescriptor, inherits;\n  return _regeneratorRuntime.wrap(function _callee2$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          value = _ref2.value, options = _ref2.options, dirname = _ref2.dirname, alias = _ref2.alias;\n          pluginObj = (0, _plugins.validatePluginObject)(value);\n          plugin = Object.assign({}, pluginObj);\n\n          if (plugin.visitor) {\n            plugin.visitor = _traverse().default.explode(Object.assign({}, plugin.visitor));\n          }\n\n          if (!plugin.inherits) {\n            _context5.next = 12;\n            break;\n          }\n\n          inheritsDescriptor = {\n            name: undefined,\n            alias: \"\".concat(alias, \"$inherits\"),\n            value: plugin.inherits,\n            options: options,\n            dirname: dirname\n          };\n          return _context5.delegateYield((0, _async.forwardAsync)(loadPluginDescriptor, function (run) {\n            return cache.invalidate(function (data) {\n              return run(inheritsDescriptor, data);\n            });\n          }), \"t0\", 7);\n\n        case 7:\n          inherits = _context5.t0;\n          plugin.pre = chain(inherits.pre, plugin.pre);\n          plugin.post = chain(inherits.post, plugin.post);\n          plugin.manipulateOptions = chain(inherits.manipulateOptions, plugin.manipulateOptions);\n          plugin.visitor = _traverse().default.visitors.merge([inherits.visitor || {}, plugin.visitor || {}]);\n\n        case 12:\n          return _context5.abrupt(\"return\", new _plugin.default(plugin, options, alias));\n\n        case 13:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _callee2);\n}));\n\nvar validateIfOptionNeedsFilename = function validateIfOptionNeedsFilename(options, descriptor) {\n  if (options.test || options.include || options.exclude) {\n    var formattedPresetName = descriptor.name ? \"\\\"\".concat(descriptor.name, \"\\\"\") : \"/* your preset */\";\n    throw new Error([\"Preset \".concat(formattedPresetName, \" requires a filename to be set when babel is called directly,\"), \"```\", \"babel.transform(code, { filename: 'file.ts', presets: [\".concat(formattedPresetName, \"] });\"), \"```\", \"See https://babeljs.io/docs/en/options#filename for more information.\"].join(\"\\n\"));\n  }\n};\n\nvar validatePreset = function validatePreset(preset, context, descriptor) {\n  if (!context.filename) {\n    var options = preset.options;\n    validateIfOptionNeedsFilename(options, descriptor);\n\n    if (options.overrides) {\n      options.overrides.forEach(function (overrideOptions) {\n        return validateIfOptionNeedsFilename(overrideOptions, descriptor);\n      });\n    }\n  }\n};\n\nfunction loadPresetDescriptor(descriptor, context) {\n  var preset;\n  return _regeneratorRuntime.wrap(function loadPresetDescriptor$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.t0 = instantiatePreset;\n          return _context6.delegateYield(loadDescriptor(descriptor, context), \"t1\", 2);\n\n        case 2:\n          _context6.t2 = _context6.t1;\n          preset = (0, _context6.t0)(_context6.t2);\n          validatePreset(preset, context, descriptor);\n          return _context6.delegateYield((0, _configChain.buildPresetChain)(preset, context), \"t3\", 6);\n\n        case 6:\n          return _context6.abrupt(\"return\", _context6.t3);\n\n        case 7:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked2);\n}\n\nvar instantiatePreset = (0, _caching.makeWeakCacheSync)(function (_ref3) {\n  var value = _ref3.value,\n      dirname = _ref3.dirname,\n      alias = _ref3.alias;\n  return {\n    options: (0, _options.validate)(\"preset\", value),\n    alias: alias,\n    dirname: dirname\n  };\n});\n\nfunction chain(a, b) {\n  var fns = [a, b].filter(Boolean);\n  if (fns.length <= 1) return fns[0];\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var _iterator2 = _createForOfIteratorHelper(fns),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var fn = _step2.value;\n        fn.apply(this, args);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  };\n}","map":{"version":3,"sources":["/OpenCerts/demo-opencerts-renderer/node_modules/@babel/core/lib/config/full.js"],"names":["loadPluginDescriptor","loadPresetDescriptor","Object","defineProperty","exports","value","default","_gensync","data","_interopRequireDefault","require","_async","_util","context","_interopRequireWildcard","_plugin","_item","_configChain","_traverse","_caching","_options","_plugins","_configApi","_partial","_getRequireWildcardCache","WeakMap","cache","obj","__esModule","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_default","loadFullConfig","inputOpts","result","options","optionDefaults","passes","plugins","presets","Error","recurseDescriptors","config","pass","i","length","descriptor","push","code","checkNoUnwrappedItemOptionPairs","ownPass","preset","splice","map","o","filter","p","ignored","forEach","opts","mergeOptions","unshift","item","getItemDescriptor","test","message","filename","slice","passPerPreset","loadDescriptor","makeWeakCache","dirname","alias","api","assign","JSON","stringify","then","instantiatePlugin","pluginObj","validatePluginObject","plugin","visitor","explode","inherits","inheritsDescriptor","name","undefined","forwardAsync","run","invalidate","pre","chain","post","manipulateOptions","visitors","merge","validateIfOptionNeedsFilename","include","exclude","formattedPresetName","join","validatePreset","overrides","overrideOptions","instantiatePreset","buildPresetChain","makeWeakCacheSync","validate","a","b","fns","Boolean","args","fn","apply"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nfunction _gensync() {\n  const data = _interopRequireDefault(require(\"gensync\"));\n\n  _gensync = function () {\n    return data;\n  };\n\n  return data;\n}\n\nvar _async = require(\"../gensync-utils/async\");\n\nvar _util = require(\"./util\");\n\nvar context = _interopRequireWildcard(require(\"../index\"));\n\nvar _plugin = _interopRequireDefault(require(\"./plugin\"));\n\nvar _item = require(\"./item\");\n\nvar _configChain = require(\"./config-chain\");\n\nfunction _traverse() {\n  const data = _interopRequireDefault(require(\"@babel/traverse\"));\n\n  _traverse = function () {\n    return data;\n  };\n\n  return data;\n}\n\nvar _caching = require(\"./caching\");\n\nvar _options = require(\"./validation/options\");\n\nvar _plugins = require(\"./validation/plugins\");\n\nvar _configApi = _interopRequireDefault(require(\"./helpers/config-api\"));\n\nvar _partial = _interopRequireDefault(require(\"./partial\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _default = (0, _gensync().default)(function* loadFullConfig(inputOpts) {\n  const result = yield* (0, _partial.default)(inputOpts);\n\n  if (!result) {\n    return null;\n  }\n\n  const {\n    options,\n    context\n  } = result;\n  const optionDefaults = {};\n  const passes = [[]];\n\n  try {\n    const {\n      plugins,\n      presets\n    } = options;\n\n    if (!plugins || !presets) {\n      throw new Error(\"Assertion failure - plugins and presets exist\");\n    }\n\n    const ignored = yield* function* recurseDescriptors(config, pass) {\n      const plugins = [];\n\n      for (let i = 0; i < config.plugins.length; i++) {\n        const descriptor = config.plugins[i];\n\n        if (descriptor.options !== false) {\n          try {\n            plugins.push((yield* loadPluginDescriptor(descriptor, context)));\n          } catch (e) {\n            if (i > 0 && e.code === \"BABEL_UNKNOWN_PLUGIN_PROPERTY\") {\n              (0, _options.checkNoUnwrappedItemOptionPairs)(config.plugins[i - 1], descriptor, \"plugin\", i, e);\n            }\n\n            throw e;\n          }\n        }\n      }\n\n      const presets = [];\n\n      for (let i = 0; i < config.presets.length; i++) {\n        const descriptor = config.presets[i];\n\n        if (descriptor.options !== false) {\n          try {\n            presets.push({\n              preset: yield* loadPresetDescriptor(descriptor, context),\n              pass: descriptor.ownPass ? [] : pass\n            });\n          } catch (e) {\n            if (i > 0 && e.code === \"BABEL_UNKNOWN_OPTION\") {\n              (0, _options.checkNoUnwrappedItemOptionPairs)(config.presets[i - 1], descriptor, \"preset\", i, e);\n            }\n\n            throw e;\n          }\n        }\n      }\n\n      if (presets.length > 0) {\n        passes.splice(1, 0, ...presets.map(o => o.pass).filter(p => p !== pass));\n\n        for (const {\n          preset,\n          pass\n        } of presets) {\n          if (!preset) return true;\n          const ignored = yield* recurseDescriptors({\n            plugins: preset.plugins,\n            presets: preset.presets\n          }, pass);\n          if (ignored) return true;\n          preset.options.forEach(opts => {\n            (0, _util.mergeOptions)(optionDefaults, opts);\n          });\n        }\n      }\n\n      if (plugins.length > 0) {\n        pass.unshift(...plugins);\n      }\n    }({\n      plugins: plugins.map(item => {\n        const desc = (0, _item.getItemDescriptor)(item);\n\n        if (!desc) {\n          throw new Error(\"Assertion failure - must be config item\");\n        }\n\n        return desc;\n      }),\n      presets: presets.map(item => {\n        const desc = (0, _item.getItemDescriptor)(item);\n\n        if (!desc) {\n          throw new Error(\"Assertion failure - must be config item\");\n        }\n\n        return desc;\n      })\n    }, passes[0]);\n    if (ignored) return null;\n  } catch (e) {\n    if (!/^\\[BABEL\\]/.test(e.message)) {\n      e.message = `[BABEL] ${context.filename || \"unknown\"}: ${e.message}`;\n    }\n\n    throw e;\n  }\n\n  const opts = optionDefaults;\n  (0, _util.mergeOptions)(opts, options);\n  opts.plugins = passes[0];\n  opts.presets = passes.slice(1).filter(plugins => plugins.length > 0).map(plugins => ({\n    plugins\n  }));\n  opts.passPerPreset = opts.presets.length > 0;\n  return {\n    options: opts,\n    passes: passes\n  };\n});\n\nexports.default = _default;\nconst loadDescriptor = (0, _caching.makeWeakCache)(function* ({\n  value,\n  options,\n  dirname,\n  alias\n}, cache) {\n  if (options === false) throw new Error(\"Assertion failure\");\n  options = options || {};\n  let item = value;\n\n  if (typeof value === \"function\") {\n    const api = Object.assign({}, context, {}, (0, _configApi.default)(cache));\n\n    try {\n      item = value(api, options, dirname);\n    } catch (e) {\n      if (alias) {\n        e.message += ` (While processing: ${JSON.stringify(alias)})`;\n      }\n\n      throw e;\n    }\n  }\n\n  if (!item || typeof item !== \"object\") {\n    throw new Error(\"Plugin/Preset did not return an object.\");\n  }\n\n  if (typeof item.then === \"function\") {\n    yield* [];\n    throw new Error(`You appear to be using an async plugin, ` + `which your current version of Babel does not support. ` + `If you're using a published plugin, ` + `you may need to upgrade your @babel/core version.`);\n  }\n\n  return {\n    value: item,\n    options,\n    dirname,\n    alias\n  };\n});\n\nfunction* loadPluginDescriptor(descriptor, context) {\n  if (descriptor.value instanceof _plugin.default) {\n    if (descriptor.options) {\n      throw new Error(\"Passed options to an existing Plugin instance will not work.\");\n    }\n\n    return descriptor.value;\n  }\n\n  return yield* instantiatePlugin((yield* loadDescriptor(descriptor, context)), context);\n}\n\nconst instantiatePlugin = (0, _caching.makeWeakCache)(function* ({\n  value,\n  options,\n  dirname,\n  alias\n}, cache) {\n  const pluginObj = (0, _plugins.validatePluginObject)(value);\n  const plugin = Object.assign({}, pluginObj);\n\n  if (plugin.visitor) {\n    plugin.visitor = _traverse().default.explode(Object.assign({}, plugin.visitor));\n  }\n\n  if (plugin.inherits) {\n    const inheritsDescriptor = {\n      name: undefined,\n      alias: `${alias}$inherits`,\n      value: plugin.inherits,\n      options,\n      dirname\n    };\n    const inherits = yield* (0, _async.forwardAsync)(loadPluginDescriptor, run => {\n      return cache.invalidate(data => run(inheritsDescriptor, data));\n    });\n    plugin.pre = chain(inherits.pre, plugin.pre);\n    plugin.post = chain(inherits.post, plugin.post);\n    plugin.manipulateOptions = chain(inherits.manipulateOptions, plugin.manipulateOptions);\n    plugin.visitor = _traverse().default.visitors.merge([inherits.visitor || {}, plugin.visitor || {}]);\n  }\n\n  return new _plugin.default(plugin, options, alias);\n});\n\nconst validateIfOptionNeedsFilename = (options, descriptor) => {\n  if (options.test || options.include || options.exclude) {\n    const formattedPresetName = descriptor.name ? `\"${descriptor.name}\"` : \"/* your preset */\";\n    throw new Error([`Preset ${formattedPresetName} requires a filename to be set when babel is called directly,`, `\\`\\`\\``, `babel.transform(code, { filename: 'file.ts', presets: [${formattedPresetName}] });`, `\\`\\`\\``, `See https://babeljs.io/docs/en/options#filename for more information.`].join(\"\\n\"));\n  }\n};\n\nconst validatePreset = (preset, context, descriptor) => {\n  if (!context.filename) {\n    const {\n      options\n    } = preset;\n    validateIfOptionNeedsFilename(options, descriptor);\n\n    if (options.overrides) {\n      options.overrides.forEach(overrideOptions => validateIfOptionNeedsFilename(overrideOptions, descriptor));\n    }\n  }\n};\n\nfunction* loadPresetDescriptor(descriptor, context) {\n  const preset = instantiatePreset((yield* loadDescriptor(descriptor, context)));\n  validatePreset(preset, context, descriptor);\n  return yield* (0, _configChain.buildPresetChain)(preset, context);\n}\n\nconst instantiatePreset = (0, _caching.makeWeakCacheSync)(({\n  value,\n  dirname,\n  alias\n}) => {\n  return {\n    options: (0, _options.validate)(\"preset\", value),\n    alias,\n    dirname\n  };\n});\n\nfunction chain(a, b) {\n  const fns = [a, b].filter(Boolean);\n  if (fns.length <= 1) return fns[0];\n  return function (...args) {\n    for (const fn of fns) {\n      fn.apply(this, args);\n    }\n  };\n}"]},"metadata":{},"sourceType":"script"}