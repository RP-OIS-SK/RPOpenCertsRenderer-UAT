{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/OpenCerts/demo-opencerts-renderer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _taggedTemplateLiteral = require(\"/OpenCerts/demo-opencerts-renderer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/taggedTemplateLiteral\");\n\nvar _createForOfIteratorHelper = require(\"/OpenCerts/demo-opencerts-renderer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _toConsumableArray = require(\"/OpenCerts/demo-opencerts-renderer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nfunction _templateObject11() {\n  var data = _taggedTemplateLiteral([\"EXPORTS.NAME = VALUE\"]);\n\n  _templateObject11 = function _templateObject11() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteral([\"\\n            if (Object.prototype.hasOwnProperty.call(EXPORTS_LIST, key)) return;\\n          \"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\n        Object.keys(NAMESPACE).forEach(function(key) {\\n          if (key === \\\"default\\\" || key === \\\"__esModule\\\") return;\\n          VERIFY_NAME_LIST;\\n\\n          Object.defineProperty(EXPORTS, key, {\\n            enumerable: true,\\n            get: function() {\\n              return NAMESPACE[key];\\n            },\\n          });\\n        });\\n    \"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\n        Object.keys(NAMESPACE).forEach(function(key) {\\n          if (key === \\\"default\\\" || key === \\\"__esModule\\\") return;\\n          VERIFY_NAME_LIST;\\n\\n          EXPORTS[key] = NAMESPACE[key];\\n        });\\n      \"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\n        Object.defineProperty(EXPORTS, \\\"__esModule\\\", {\\n          value: true,\\n        });\\n      \"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n        EXPORTS.__esModule = true;\\n      \"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n      Object.defineProperty(EXPORTS, \\\"EXPORT_NAME\\\", {\\n        enumerable: true,\\n        get: function() {\\n          return NAMESPACE.IMPORT_NAME;\\n        },\\n      });\\n    \"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"EXPORTS.EXPORT_NAME = NAMESPACE.IMPORT_NAME;\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"EXPORTS.NAME = NAMESPACE;\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n            Object.defineProperty(EXPORTS, \\\"NAME\\\", {\\n              enumerable: true,\\n              get: function() {\\n                return NAMESPACE;\\n              }\\n            });\\n          \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"var NAME = SOURCE;\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.rewriteModuleStatementsAndPrepareHeader = rewriteModuleStatementsAndPrepareHeader;\nexports.ensureStatementsHoisted = ensureStatementsHoisted;\nexports.wrapInterop = wrapInterop;\nexports.buildNamespaceInitStatements = buildNamespaceInitStatements;\nObject.defineProperty(exports, \"isModule\", {\n  enumerable: true,\n  get: function get() {\n    return _helperModuleImports.isModule;\n  }\n});\nObject.defineProperty(exports, \"rewriteThis\", {\n  enumerable: true,\n  get: function get() {\n    return _rewriteThis.default;\n  }\n});\nObject.defineProperty(exports, \"hasExports\", {\n  enumerable: true,\n  get: function get() {\n    return _normalizeAndLoadMetadata.hasExports;\n  }\n});\nObject.defineProperty(exports, \"isSideEffectImport\", {\n  enumerable: true,\n  get: function get() {\n    return _normalizeAndLoadMetadata.isSideEffectImport;\n  }\n});\nObject.defineProperty(exports, \"getModuleName\", {\n  enumerable: true,\n  get: function get() {\n    return _getModuleName.default;\n  }\n});\n\nvar _assert = _interopRequireDefault(require(\"assert\"));\n\nvar t = _interopRequireWildcard(require(\"@babel/types\"));\n\nvar _template = _interopRequireDefault(require(\"@babel/template\"));\n\nvar _chunk = _interopRequireDefault(require(\"lodash/chunk\"));\n\nvar _helperModuleImports = require(\"@babel/helper-module-imports\");\n\nvar _rewriteThis = _interopRequireDefault(require(\"./rewrite-this\"));\n\nvar _rewriteLiveReferences = _interopRequireDefault(require(\"./rewrite-live-references\"));\n\nvar _normalizeAndLoadMetadata = _interopRequireWildcard(require(\"./normalize-and-load-metadata\"));\n\nvar _getModuleName = _interopRequireDefault(require(\"./get-module-name\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction rewriteModuleStatementsAndPrepareHeader(path, _ref) {\n  var exportName = _ref.exportName,\n      strict = _ref.strict,\n      allowTopLevelThis = _ref.allowTopLevelThis,\n      strictMode = _ref.strictMode,\n      loose = _ref.loose,\n      noInterop = _ref.noInterop,\n      lazy = _ref.lazy,\n      esNamespaceOnly = _ref.esNamespaceOnly;\n  (0, _assert.default)((0, _helperModuleImports.isModule)(path), \"Cannot process module statements in a script\");\n  path.node.sourceType = \"script\";\n  var meta = (0, _normalizeAndLoadMetadata.default)(path, exportName, {\n    noInterop: noInterop,\n    loose: loose,\n    lazy: lazy,\n    esNamespaceOnly: esNamespaceOnly\n  });\n\n  if (!allowTopLevelThis) {\n    (0, _rewriteThis.default)(path);\n  }\n\n  (0, _rewriteLiveReferences.default)(path, meta);\n\n  if (strictMode !== false) {\n    var hasStrict = path.node.directives.some(function (directive) {\n      return directive.value.value === \"use strict\";\n    });\n\n    if (!hasStrict) {\n      path.unshiftContainer(\"directives\", t.directive(t.directiveLiteral(\"use strict\")));\n    }\n  }\n\n  var headers = [];\n\n  if ((0, _normalizeAndLoadMetadata.hasExports)(meta) && !strict) {\n    headers.push(buildESModuleHeader(meta, loose));\n  }\n\n  var nameList = buildExportNameListDeclaration(path, meta);\n\n  if (nameList) {\n    meta.exportNameListName = nameList.name;\n    headers.push(nameList.statement);\n  }\n\n  headers.push.apply(headers, _toConsumableArray(buildExportInitializationStatements(path, meta, loose)));\n  return {\n    meta: meta,\n    headers: headers\n  };\n}\n\nfunction ensureStatementsHoisted(statements) {\n  statements.forEach(function (header) {\n    header._blockHoist = 3;\n  });\n}\n\nfunction wrapInterop(programPath, expr, type) {\n  if (type === \"none\") {\n    return null;\n  }\n\n  var helper;\n\n  if (type === \"default\") {\n    helper = \"interopRequireDefault\";\n  } else if (type === \"namespace\") {\n    helper = \"interopRequireWildcard\";\n  } else {\n    throw new Error(\"Unknown interop: \".concat(type));\n  }\n\n  return t.callExpression(programPath.hub.addHelper(helper), [expr]);\n}\n\nfunction buildNamespaceInitStatements(metadata, sourceMetadata) {\n  var loose = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var statements = [];\n  var srcNamespace = t.identifier(sourceMetadata.name);\n  if (sourceMetadata.lazy) srcNamespace = t.callExpression(srcNamespace, []);\n\n  var _iterator = _createForOfIteratorHelper(sourceMetadata.importsNamespace),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var localName = _step.value;\n      if (localName === sourceMetadata.name) continue;\n      statements.push(_template.default.statement(_templateObject())({\n        NAME: localName,\n        SOURCE: t.cloneNode(srcNamespace)\n      }));\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  if (loose) {\n    statements.push.apply(statements, _toConsumableArray(buildReexportsFromMeta(metadata, sourceMetadata, loose)));\n  }\n\n  var _iterator2 = _createForOfIteratorHelper(sourceMetadata.reexportNamespace),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var exportName = _step2.value;\n      statements.push((sourceMetadata.lazy ? _template.default.statement(_templateObject2()) : _template.default.statement(_templateObject3()))({\n        EXPORTS: metadata.exportName,\n        NAME: exportName,\n        NAMESPACE: t.cloneNode(srcNamespace)\n      }));\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n\n  if (sourceMetadata.reexportAll) {\n    var statement = buildNamespaceReexport(metadata, t.cloneNode(srcNamespace), loose);\n    statement.loc = sourceMetadata.reexportAll.loc;\n    statements.push(statement);\n  }\n\n  return statements;\n}\n\nvar getTemplateForReexport = function getTemplateForReexport(loose) {\n  return loose ? _template.default.statement(_templateObject4()) : (0, _template.default)(_templateObject5());\n};\n\nvar buildReexportsFromMeta = function buildReexportsFromMeta(meta, metadata, loose) {\n  var namespace = metadata.lazy ? t.callExpression(t.identifier(metadata.name), []) : t.identifier(metadata.name);\n  var templateForCurrentMode = getTemplateForReexport(loose);\n  return Array.from(metadata.reexports, function (_ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n        exportName = _ref3[0],\n        importName = _ref3[1];\n\n    return templateForCurrentMode({\n      EXPORTS: meta.exportName,\n      EXPORT_NAME: exportName,\n      NAMESPACE: t.cloneNode(namespace),\n      IMPORT_NAME: importName\n    });\n  });\n};\n\nfunction buildESModuleHeader(metadata) {\n  var enumerable = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return (enumerable ? _template.default.statement(_templateObject6()) : _template.default.statement(_templateObject7()))({\n    EXPORTS: metadata.exportName\n  });\n}\n\nfunction buildNamespaceReexport(metadata, namespace, loose) {\n  return (loose ? _template.default.statement(_templateObject8()) : _template.default.statement(_templateObject9()))({\n    NAMESPACE: namespace,\n    EXPORTS: metadata.exportName,\n    VERIFY_NAME_LIST: metadata.exportNameListName ? (0, _template.default)(_templateObject10())({\n      EXPORTS_LIST: metadata.exportNameListName\n    }) : null\n  });\n}\n\nfunction buildExportNameListDeclaration(programPath, metadata) {\n  var exportedVars = Object.create(null);\n\n  var _iterator3 = _createForOfIteratorHelper(metadata.local.values()),\n      _step3;\n\n  try {\n    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n      var data = _step3.value;\n\n      var _iterator5 = _createForOfIteratorHelper(data.names),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var _name = _step5.value;\n          exportedVars[_name] = true;\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n    }\n  } catch (err) {\n    _iterator3.e(err);\n  } finally {\n    _iterator3.f();\n  }\n\n  var hasReexport = false;\n\n  var _iterator4 = _createForOfIteratorHelper(metadata.source.values()),\n      _step4;\n\n  try {\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      var _data = _step4.value;\n\n      var _iterator6 = _createForOfIteratorHelper(_data.reexports.keys()),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var exportName = _step6.value;\n          exportedVars[exportName] = true;\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n\n      var _iterator7 = _createForOfIteratorHelper(_data.reexportNamespace),\n          _step7;\n\n      try {\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var _exportName = _step7.value;\n          exportedVars[_exportName] = true;\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n\n      hasReexport = hasReexport || _data.reexportAll;\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n\n  if (!hasReexport || Object.keys(exportedVars).length === 0) return null;\n  var name = programPath.scope.generateUidIdentifier(\"exportNames\");\n  delete exportedVars.default;\n  return {\n    name: name.name,\n    statement: t.variableDeclaration(\"var\", [t.variableDeclarator(name, t.valueToNode(exportedVars))])\n  };\n}\n\nfunction buildExportInitializationStatements(programPath, metadata) {\n  var loose = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var initStatements = [];\n  var exportNames = [];\n\n  var _iterator8 = _createForOfIteratorHelper(metadata.local),\n      _step8;\n\n  try {\n    for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n      var _step8$value = _slicedToArray(_step8.value, 2),\n          localName = _step8$value[0],\n          data = _step8$value[1];\n\n      if (data.kind === \"import\") {} else if (data.kind === \"hoisted\") {\n        initStatements.push(buildInitStatement(metadata, data.names, t.identifier(localName)));\n      } else {\n        exportNames.push.apply(exportNames, _toConsumableArray(data.names));\n      }\n    }\n  } catch (err) {\n    _iterator8.e(err);\n  } finally {\n    _iterator8.f();\n  }\n\n  var _iterator9 = _createForOfIteratorHelper(metadata.source.values()),\n      _step9;\n\n  try {\n    for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n      var _data2 = _step9.value;\n\n      if (!loose) {\n        initStatements.push.apply(initStatements, _toConsumableArray(buildReexportsFromMeta(metadata, _data2, loose)));\n      }\n\n      var _iterator10 = _createForOfIteratorHelper(_data2.reexportNamespace),\n          _step10;\n\n      try {\n        for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n          var exportName = _step10.value;\n          exportNames.push(exportName);\n        }\n      } catch (err) {\n        _iterator10.e(err);\n      } finally {\n        _iterator10.f();\n      }\n    }\n  } catch (err) {\n    _iterator9.e(err);\n  } finally {\n    _iterator9.f();\n  }\n\n  initStatements.push.apply(initStatements, _toConsumableArray((0, _chunk.default)(exportNames, 100).map(function (members) {\n    return buildInitStatement(metadata, members, programPath.scope.buildUndefinedNode());\n  })));\n  return initStatements;\n}\n\nfunction buildInitStatement(metadata, exportNames, initExpr) {\n  return t.expressionStatement(exportNames.reduce(function (acc, exportName) {\n    return _template.default.expression(_templateObject11())({\n      EXPORTS: metadata.exportName,\n      NAME: exportName,\n      VALUE: acc\n    });\n  }, initExpr));\n}","map":{"version":3,"sources":["/OpenCerts/demo-opencerts-renderer/node_modules/@babel/helper-module-transforms/lib/index.js"],"names":["Object","defineProperty","exports","value","rewriteModuleStatementsAndPrepareHeader","ensureStatementsHoisted","wrapInterop","buildNamespaceInitStatements","enumerable","get","_helperModuleImports","isModule","_rewriteThis","default","_normalizeAndLoadMetadata","hasExports","isSideEffectImport","_getModuleName","_assert","_interopRequireDefault","require","t","_interopRequireWildcard","_template","_chunk","_rewriteLiveReferences","_getRequireWildcardCache","WeakMap","cache","obj","__esModule","has","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","path","exportName","strict","allowTopLevelThis","strictMode","loose","noInterop","lazy","esNamespaceOnly","node","sourceType","meta","hasStrict","directives","some","directive","unshiftContainer","directiveLiteral","headers","push","buildESModuleHeader","nameList","buildExportNameListDeclaration","exportNameListName","name","statement","buildExportInitializationStatements","statements","forEach","header","_blockHoist","programPath","expr","type","helper","Error","callExpression","hub","addHelper","metadata","sourceMetadata","srcNamespace","identifier","importsNamespace","localName","NAME","SOURCE","cloneNode","buildReexportsFromMeta","reexportNamespace","EXPORTS","NAMESPACE","reexportAll","buildNamespaceReexport","loc","getTemplateForReexport","namespace","templateForCurrentMode","Array","from","reexports","importName","EXPORT_NAME","IMPORT_NAME","VERIFY_NAME_LIST","EXPORTS_LIST","exportedVars","create","local","values","data","names","hasReexport","source","keys","length","scope","generateUidIdentifier","variableDeclaration","variableDeclarator","valueToNode","initStatements","exportNames","kind","buildInitStatement","map","members","buildUndefinedNode","initExpr","expressionStatement","reduce","acc","expression","VALUE"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.rewriteModuleStatementsAndPrepareHeader = rewriteModuleStatementsAndPrepareHeader;\nexports.ensureStatementsHoisted = ensureStatementsHoisted;\nexports.wrapInterop = wrapInterop;\nexports.buildNamespaceInitStatements = buildNamespaceInitStatements;\nObject.defineProperty(exports, \"isModule\", {\n  enumerable: true,\n  get: function () {\n    return _helperModuleImports.isModule;\n  }\n});\nObject.defineProperty(exports, \"rewriteThis\", {\n  enumerable: true,\n  get: function () {\n    return _rewriteThis.default;\n  }\n});\nObject.defineProperty(exports, \"hasExports\", {\n  enumerable: true,\n  get: function () {\n    return _normalizeAndLoadMetadata.hasExports;\n  }\n});\nObject.defineProperty(exports, \"isSideEffectImport\", {\n  enumerable: true,\n  get: function () {\n    return _normalizeAndLoadMetadata.isSideEffectImport;\n  }\n});\nObject.defineProperty(exports, \"getModuleName\", {\n  enumerable: true,\n  get: function () {\n    return _getModuleName.default;\n  }\n});\n\nvar _assert = _interopRequireDefault(require(\"assert\"));\n\nvar t = _interopRequireWildcard(require(\"@babel/types\"));\n\nvar _template = _interopRequireDefault(require(\"@babel/template\"));\n\nvar _chunk = _interopRequireDefault(require(\"lodash/chunk\"));\n\nvar _helperModuleImports = require(\"@babel/helper-module-imports\");\n\nvar _rewriteThis = _interopRequireDefault(require(\"./rewrite-this\"));\n\nvar _rewriteLiveReferences = _interopRequireDefault(require(\"./rewrite-live-references\"));\n\nvar _normalizeAndLoadMetadata = _interopRequireWildcard(require(\"./normalize-and-load-metadata\"));\n\nvar _getModuleName = _interopRequireDefault(require(\"./get-module-name\"));\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction rewriteModuleStatementsAndPrepareHeader(path, {\n  exportName,\n  strict,\n  allowTopLevelThis,\n  strictMode,\n  loose,\n  noInterop,\n  lazy,\n  esNamespaceOnly\n}) {\n  (0, _assert.default)((0, _helperModuleImports.isModule)(path), \"Cannot process module statements in a script\");\n  path.node.sourceType = \"script\";\n  const meta = (0, _normalizeAndLoadMetadata.default)(path, exportName, {\n    noInterop,\n    loose,\n    lazy,\n    esNamespaceOnly\n  });\n\n  if (!allowTopLevelThis) {\n    (0, _rewriteThis.default)(path);\n  }\n\n  (0, _rewriteLiveReferences.default)(path, meta);\n\n  if (strictMode !== false) {\n    const hasStrict = path.node.directives.some(directive => {\n      return directive.value.value === \"use strict\";\n    });\n\n    if (!hasStrict) {\n      path.unshiftContainer(\"directives\", t.directive(t.directiveLiteral(\"use strict\")));\n    }\n  }\n\n  const headers = [];\n\n  if ((0, _normalizeAndLoadMetadata.hasExports)(meta) && !strict) {\n    headers.push(buildESModuleHeader(meta, loose));\n  }\n\n  const nameList = buildExportNameListDeclaration(path, meta);\n\n  if (nameList) {\n    meta.exportNameListName = nameList.name;\n    headers.push(nameList.statement);\n  }\n\n  headers.push(...buildExportInitializationStatements(path, meta, loose));\n  return {\n    meta,\n    headers\n  };\n}\n\nfunction ensureStatementsHoisted(statements) {\n  statements.forEach(header => {\n    header._blockHoist = 3;\n  });\n}\n\nfunction wrapInterop(programPath, expr, type) {\n  if (type === \"none\") {\n    return null;\n  }\n\n  let helper;\n\n  if (type === \"default\") {\n    helper = \"interopRequireDefault\";\n  } else if (type === \"namespace\") {\n    helper = \"interopRequireWildcard\";\n  } else {\n    throw new Error(`Unknown interop: ${type}`);\n  }\n\n  return t.callExpression(programPath.hub.addHelper(helper), [expr]);\n}\n\nfunction buildNamespaceInitStatements(metadata, sourceMetadata, loose = false) {\n  const statements = [];\n  let srcNamespace = t.identifier(sourceMetadata.name);\n  if (sourceMetadata.lazy) srcNamespace = t.callExpression(srcNamespace, []);\n\n  for (const localName of sourceMetadata.importsNamespace) {\n    if (localName === sourceMetadata.name) continue;\n    statements.push(_template.default.statement`var NAME = SOURCE;`({\n      NAME: localName,\n      SOURCE: t.cloneNode(srcNamespace)\n    }));\n  }\n\n  if (loose) {\n    statements.push(...buildReexportsFromMeta(metadata, sourceMetadata, loose));\n  }\n\n  for (const exportName of sourceMetadata.reexportNamespace) {\n    statements.push((sourceMetadata.lazy ? _template.default.statement`\n            Object.defineProperty(EXPORTS, \"NAME\", {\n              enumerable: true,\n              get: function() {\n                return NAMESPACE;\n              }\n            });\n          ` : _template.default.statement`EXPORTS.NAME = NAMESPACE;`)({\n      EXPORTS: metadata.exportName,\n      NAME: exportName,\n      NAMESPACE: t.cloneNode(srcNamespace)\n    }));\n  }\n\n  if (sourceMetadata.reexportAll) {\n    const statement = buildNamespaceReexport(metadata, t.cloneNode(srcNamespace), loose);\n    statement.loc = sourceMetadata.reexportAll.loc;\n    statements.push(statement);\n  }\n\n  return statements;\n}\n\nconst getTemplateForReexport = loose => {\n  return loose ? _template.default.statement`EXPORTS.EXPORT_NAME = NAMESPACE.IMPORT_NAME;` : (0, _template.default)`\n      Object.defineProperty(EXPORTS, \"EXPORT_NAME\", {\n        enumerable: true,\n        get: function() {\n          return NAMESPACE.IMPORT_NAME;\n        },\n      });\n    `;\n};\n\nconst buildReexportsFromMeta = (meta, metadata, loose) => {\n  const namespace = metadata.lazy ? t.callExpression(t.identifier(metadata.name), []) : t.identifier(metadata.name);\n  const templateForCurrentMode = getTemplateForReexport(loose);\n  return Array.from(metadata.reexports, ([exportName, importName]) => templateForCurrentMode({\n    EXPORTS: meta.exportName,\n    EXPORT_NAME: exportName,\n    NAMESPACE: t.cloneNode(namespace),\n    IMPORT_NAME: importName\n  }));\n};\n\nfunction buildESModuleHeader(metadata, enumerable = false) {\n  return (enumerable ? _template.default.statement`\n        EXPORTS.__esModule = true;\n      ` : _template.default.statement`\n        Object.defineProperty(EXPORTS, \"__esModule\", {\n          value: true,\n        });\n      `)({\n    EXPORTS: metadata.exportName\n  });\n}\n\nfunction buildNamespaceReexport(metadata, namespace, loose) {\n  return (loose ? _template.default.statement`\n        Object.keys(NAMESPACE).forEach(function(key) {\n          if (key === \"default\" || key === \"__esModule\") return;\n          VERIFY_NAME_LIST;\n\n          EXPORTS[key] = NAMESPACE[key];\n        });\n      ` : _template.default.statement`\n        Object.keys(NAMESPACE).forEach(function(key) {\n          if (key === \"default\" || key === \"__esModule\") return;\n          VERIFY_NAME_LIST;\n\n          Object.defineProperty(EXPORTS, key, {\n            enumerable: true,\n            get: function() {\n              return NAMESPACE[key];\n            },\n          });\n        });\n    `)({\n    NAMESPACE: namespace,\n    EXPORTS: metadata.exportName,\n    VERIFY_NAME_LIST: metadata.exportNameListName ? (0, _template.default)`\n            if (Object.prototype.hasOwnProperty.call(EXPORTS_LIST, key)) return;\n          `({\n      EXPORTS_LIST: metadata.exportNameListName\n    }) : null\n  });\n}\n\nfunction buildExportNameListDeclaration(programPath, metadata) {\n  const exportedVars = Object.create(null);\n\n  for (const data of metadata.local.values()) {\n    for (const name of data.names) {\n      exportedVars[name] = true;\n    }\n  }\n\n  let hasReexport = false;\n\n  for (const data of metadata.source.values()) {\n    for (const exportName of data.reexports.keys()) {\n      exportedVars[exportName] = true;\n    }\n\n    for (const exportName of data.reexportNamespace) {\n      exportedVars[exportName] = true;\n    }\n\n    hasReexport = hasReexport || data.reexportAll;\n  }\n\n  if (!hasReexport || Object.keys(exportedVars).length === 0) return null;\n  const name = programPath.scope.generateUidIdentifier(\"exportNames\");\n  delete exportedVars.default;\n  return {\n    name: name.name,\n    statement: t.variableDeclaration(\"var\", [t.variableDeclarator(name, t.valueToNode(exportedVars))])\n  };\n}\n\nfunction buildExportInitializationStatements(programPath, metadata, loose = false) {\n  const initStatements = [];\n  const exportNames = [];\n\n  for (const [localName, data] of metadata.local) {\n    if (data.kind === \"import\") {} else if (data.kind === \"hoisted\") {\n      initStatements.push(buildInitStatement(metadata, data.names, t.identifier(localName)));\n    } else {\n      exportNames.push(...data.names);\n    }\n  }\n\n  for (const data of metadata.source.values()) {\n    if (!loose) {\n      initStatements.push(...buildReexportsFromMeta(metadata, data, loose));\n    }\n\n    for (const exportName of data.reexportNamespace) {\n      exportNames.push(exportName);\n    }\n  }\n\n  initStatements.push(...(0, _chunk.default)(exportNames, 100).map(members => {\n    return buildInitStatement(metadata, members, programPath.scope.buildUndefinedNode());\n  }));\n  return initStatements;\n}\n\nfunction buildInitStatement(metadata, exportNames, initExpr) {\n  return t.expressionStatement(exportNames.reduce((acc, exportName) => _template.default.expression`EXPORTS.NAME = VALUE`({\n    EXPORTS: metadata.exportName,\n    NAME: exportName,\n    VALUE: acc\n  }), initExpr));\n}"]},"metadata":{},"sourceType":"script"}