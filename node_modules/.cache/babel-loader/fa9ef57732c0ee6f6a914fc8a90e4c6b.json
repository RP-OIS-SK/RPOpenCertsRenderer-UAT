{"ast":null,"code":"import _classCallCheck from\"/OpenCerts/demo-opencerts-renderer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/OpenCerts/demo-opencerts-renderer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/OpenCerts/demo-opencerts-renderer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/OpenCerts/demo-opencerts-renderer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/OpenCerts/demo-opencerts-renderer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{range}from\"lodash\";import{Document,Page,pdfjs}from\"react-pdf\";import style from\"./pdfRenderer.module.scss\";// https://github.com/wojtekmaj/react-pdf#browserify-and-others\npdfjs.GlobalWorkerOptions.workerSrc=\"//cdnjs.cloudflare.com/ajax/libs/pdf.js/\".concat(pdfjs.version,\"/pdf.worker.js\");var PdfRenderer=/*#__PURE__*/function(_Component){_inherits(PdfRenderer,_Component);var _super=_createSuper(PdfRenderer);function PdfRenderer(props){var _this;_classCallCheck(this,PdfRenderer);_this=_super.call(this,props);_this.onDocumentLoadSuccess=_this.onDocumentLoadSuccess.bind(_assertThisInitialized(_this));_this.onPageLoadSuccess=_this.onPageLoadSuccess.bind(_assertThisInitialized(_this));_this.state={numPages:null};return _this;}_createClass(PdfRenderer,[{key:\"onDocumentLoadSuccess\",value:function onDocumentLoadSuccess(_ref){var numPages=_ref.numPages;this.setState({numPages:numPages});this.props.handleHeightUpdate(document.documentElement.offsetHeight);}},{key:\"onPageLoadSuccess\",value:function onPageLoadSuccess(){this.props.handleHeightUpdate(document.documentElement.offsetHeight);}},{key:\"render\",value:function render(){var _this2=this;var data=this.props.attachment.data;var numPages=this.state.numPages;return/*#__PURE__*/React.createElement(Document,{className:\"container\",file:\"data:application/pdf;base64,\".concat(data),onLoadSuccess:this.onDocumentLoadSuccess},range(numPages).map(function(index){return/*#__PURE__*/ (// TODO: Dynamically resize width to fit container\n// https://github.com/wojtekmaj/react-pdf/issues/129\nReact.createElement(Page,{className:style.page,key:\"page_\".concat(index+1),pageNumber:index+1,onLoadSuccess:_this2.onPageLoadSuccess}));}));}}]);return PdfRenderer;}(Component);export{PdfRenderer as default};","map":{"version":3,"sources":["/OpenCerts/demo-opencerts-renderer/src/components/attachmentTemplates/pdfRenderer/index.js"],"names":["React","Component","range","Document","Page","pdfjs","style","GlobalWorkerOptions","workerSrc","version","PdfRenderer","props","onDocumentLoadSuccess","bind","onPageLoadSuccess","state","numPages","setState","handleHeightUpdate","document","documentElement","offsetHeight","data","attachment","map","index","page"],"mappings":"6vBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CAEA,OAASC,KAAT,KAAsB,QAAtB,CACA,OAASC,QAAT,CAAmBC,IAAnB,CAAyBC,KAAzB,KAAsC,WAAtC,CACA,MAAOC,CAAAA,KAAP,KAAkB,2BAAlB,CAEA;AACAD,KAAK,CAACE,mBAAN,CAA0BC,SAA1B,mDAAiFH,KAAK,CAACI,OAAvF,mB,GAEqBC,CAAAA,W,0GACnB,qBAAYC,KAAZ,CAAmB,6CACjB,uBAAMA,KAAN,EACA,MAAKC,qBAAL,CAA6B,MAAKA,qBAAL,CAA2BC,IAA3B,+BAA7B,CACA,MAAKC,iBAAL,CAAyB,MAAKA,iBAAL,CAAuBD,IAAvB,+BAAzB,CAEA,MAAKE,KAAL,CAAa,CACXC,QAAQ,CAAE,IADC,CAAb,CALiB,aAQlB,C,iGAEmC,IAAZA,CAAAA,QAAY,MAAZA,QAAY,CAClC,KAAKC,QAAL,CAAc,CAAED,QAAQ,CAARA,QAAF,CAAd,EACA,KAAKL,KAAL,CAAWO,kBAAX,CAA8BC,QAAQ,CAACC,eAAT,CAAyBC,YAAvD,EACD,C,6DAEmB,CAClB,KAAKV,KAAL,CAAWO,kBAAX,CAA8BC,QAAQ,CAACC,eAAT,CAAyBC,YAAvD,EACD,C,uCAEQ,oBACCC,CAAAA,IADD,CACU,KAAKX,KAAL,CAAWY,UADrB,CACCD,IADD,IAECN,CAAAA,QAFD,CAEc,KAAKD,KAFnB,CAECC,QAFD,CAIP,mBACE,oBAAC,QAAD,EACE,SAAS,CAAC,WADZ,CAEE,IAAI,uCAAiCM,IAAjC,CAFN,CAGE,aAAa,CAAE,KAAKV,qBAHtB,EAKGV,KAAK,CAACc,QAAD,CAAL,CAAgBQ,GAAhB,CAAoB,SAAAC,KAAK,sBACxB;AACA;AACA,oBAAC,IAAD,EACE,SAAS,CAAEnB,KAAK,CAACoB,IADnB,CAEE,GAAG,gBAAUD,KAAK,CAAG,CAAlB,CAFL,CAGE,UAAU,CAAEA,KAAK,CAAG,CAHtB,CAIE,aAAa,CAAE,MAAI,CAACX,iBAJtB,EAHwB,GAAzB,CALH,CADF,CAkBD,C,yBA1CsCb,S,SAApBS,W","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { range } from \"lodash\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\nimport style from \"./pdfRenderer.module.scss\";\n\n// https://github.com/wojtekmaj/react-pdf#browserify-and-others\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\n\nexport default class PdfRenderer extends Component {\n  constructor(props) {\n    super(props);\n    this.onDocumentLoadSuccess = this.onDocumentLoadSuccess.bind(this);\n    this.onPageLoadSuccess = this.onPageLoadSuccess.bind(this);\n\n    this.state = {\n      numPages: null\n    };\n  }\n\n  onDocumentLoadSuccess({ numPages }) {\n    this.setState({ numPages });\n    this.props.handleHeightUpdate(document.documentElement.offsetHeight);\n  }\n\n  onPageLoadSuccess() {\n    this.props.handleHeightUpdate(document.documentElement.offsetHeight);\n  }\n\n  render() {\n    const { data } = this.props.attachment;\n    const { numPages } = this.state;\n\n    return (\n      <Document\n        className=\"container\"\n        file={`data:application/pdf;base64,${data}`}\n        onLoadSuccess={this.onDocumentLoadSuccess}\n      >\n        {range(numPages).map(index => (\n          // TODO: Dynamically resize width to fit container\n          // https://github.com/wojtekmaj/react-pdf/issues/129\n          <Page\n            className={style.page}\n            key={`page_${index + 1}`}\n            pageNumber={index + 1}\n            onLoadSuccess={this.onPageLoadSuccess}\n          />\n        ))}\n      </Document>\n    );\n  }\n}\n\nPdfRenderer.propTypes = {\n  attachment: PropTypes.shape({\n    data: PropTypes.string.isRequired\n  }).isRequired,\n  handleHeightUpdate: PropTypes.func.isRequired\n};\n"]},"metadata":{},"sourceType":"module"}