{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"/OpenCerts/demo-opencerts-renderer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _toConsumableArray = require(\"/OpenCerts/demo-opencerts-renderer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _regeneratorRuntime = require(\"/OpenCerts/demo-opencerts-renderer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(buildPresetChain),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(buildRootChain),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(mergeExtendsChain);\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.buildPresetChain = buildPresetChain;\nexports.buildRootChain = buildRootChain;\nexports.buildPresetChainWalker = void 0;\n\nfunction _path() {\n  var data = _interopRequireDefault(require(\"path\"));\n\n  _path = function _path() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _debug() {\n  var data = _interopRequireDefault(require(\"debug\"));\n\n  _debug = function _debug() {\n    return data;\n  };\n\n  return data;\n}\n\nvar _options = require(\"./validation/options\");\n\nvar _patternToRegex = _interopRequireDefault(require(\"./pattern-to-regex\"));\n\nvar _files = require(\"./files\");\n\nvar _caching = require(\"./caching\");\n\nvar _configDescriptors = require(\"./config-descriptors\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar debug = (0, _debug().default)(\"babel:config:config-chain\");\n\nfunction buildPresetChain(arg, context) {\n  var chain;\n  return _regeneratorRuntime.wrap(function buildPresetChain$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          return _context.delegateYield(buildPresetChainWalker(arg, context), \"t0\", 1);\n\n        case 1:\n          chain = _context.t0;\n\n          if (chain) {\n            _context.next = 4;\n            break;\n          }\n\n          return _context.abrupt(\"return\", null);\n\n        case 4:\n          return _context.abrupt(\"return\", {\n            plugins: dedupDescriptors(chain.plugins),\n            presets: dedupDescriptors(chain.presets),\n            options: chain.options.map(function (o) {\n              return normalizeOptions(o);\n            })\n          });\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n\nvar buildPresetChainWalker = makeChainWalker({\n  init: function init(arg) {\n    return arg;\n  },\n  root: function root(preset) {\n    return loadPresetDescriptors(preset);\n  },\n  env: function env(preset, envName) {\n    return loadPresetEnvDescriptors(preset)(envName);\n  },\n  overrides: function overrides(preset, index) {\n    return loadPresetOverridesDescriptors(preset)(index);\n  },\n  overridesEnv: function overridesEnv(preset, index, envName) {\n    return loadPresetOverridesEnvDescriptors(preset)(index)(envName);\n  }\n});\nexports.buildPresetChainWalker = buildPresetChainWalker;\nvar loadPresetDescriptors = (0, _caching.makeWeakCacheSync)(function (preset) {\n  return buildRootDescriptors(preset, preset.alias, _configDescriptors.createUncachedDescriptors);\n});\nvar loadPresetEnvDescriptors = (0, _caching.makeWeakCacheSync)(function (preset) {\n  return (0, _caching.makeStrongCacheSync)(function (envName) {\n    return buildEnvDescriptors(preset, preset.alias, _configDescriptors.createUncachedDescriptors, envName);\n  });\n});\nvar loadPresetOverridesDescriptors = (0, _caching.makeWeakCacheSync)(function (preset) {\n  return (0, _caching.makeStrongCacheSync)(function (index) {\n    return buildOverrideDescriptors(preset, preset.alias, _configDescriptors.createUncachedDescriptors, index);\n  });\n});\nvar loadPresetOverridesEnvDescriptors = (0, _caching.makeWeakCacheSync)(function (preset) {\n  return (0, _caching.makeStrongCacheSync)(function (index) {\n    return (0, _caching.makeStrongCacheSync)(function (envName) {\n      return buildOverrideEnvDescriptors(preset, preset.alias, _configDescriptors.createUncachedDescriptors, index, envName);\n    });\n  });\n});\n\nfunction buildRootChain(opts, context) {\n  var programmaticChain, configFile, babelrc, babelrcRoots, babelrcRootsDirectory, configFileChain, validatedFile, result, pkgData, ignoreFile, babelrcFile, fileChain, _yield, _result, chain;\n\n  return _regeneratorRuntime.wrap(function buildRootChain$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          return _context2.delegateYield(loadProgrammaticChain({\n            options: opts,\n            dirname: context.cwd\n          }, context), \"t0\", 1);\n\n        case 1:\n          programmaticChain = _context2.t0;\n\n          if (programmaticChain) {\n            _context2.next = 4;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", null);\n\n        case 4:\n          if (!(typeof opts.configFile === \"string\")) {\n            _context2.next = 9;\n            break;\n          }\n\n          return _context2.delegateYield((0, _files.loadConfig)(opts.configFile, context.cwd, context.envName, context.caller), \"t1\", 6);\n\n        case 6:\n          configFile = _context2.t1;\n          _context2.next = 12;\n          break;\n\n        case 9:\n          if (!(opts.configFile !== false)) {\n            _context2.next = 12;\n            break;\n          }\n\n          return _context2.delegateYield((0, _files.findRootConfig)(context.root, context.envName, context.caller), \"t2\", 11);\n\n        case 11:\n          configFile = _context2.t2;\n\n        case 12:\n          babelrc = opts.babelrc, babelrcRoots = opts.babelrcRoots;\n          babelrcRootsDirectory = context.cwd;\n          configFileChain = emptyChain();\n\n          if (!configFile) {\n            _context2.next = 24;\n            break;\n          }\n\n          validatedFile = validateConfigFile(configFile);\n          return _context2.delegateYield(loadFileChain(validatedFile, context), \"t3\", 18);\n\n        case 18:\n          result = _context2.t3;\n\n          if (result) {\n            _context2.next = 21;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", null);\n\n        case 21:\n          if (babelrc === undefined) {\n            babelrc = validatedFile.options.babelrc;\n          }\n\n          if (babelrcRoots === undefined) {\n            babelrcRootsDirectory = validatedFile.dirname;\n            babelrcRoots = validatedFile.options.babelrcRoots;\n          }\n\n          mergeChain(configFileChain, result);\n\n        case 24:\n          if (!(typeof context.filename === \"string\")) {\n            _context2.next = 29;\n            break;\n          }\n\n          return _context2.delegateYield((0, _files.findPackageData)(context.filename), \"t5\", 26);\n\n        case 26:\n          _context2.t4 = _context2.t5;\n          _context2.next = 30;\n          break;\n\n        case 29:\n          _context2.t4 = null;\n\n        case 30:\n          pkgData = _context2.t4;\n          fileChain = emptyChain();\n\n          if (!((babelrc === true || babelrc === undefined) && pkgData && babelrcLoadEnabled(context, pkgData, babelrcRoots, babelrcRootsDirectory))) {\n            _context2.next = 45;\n            break;\n          }\n\n          return _context2.delegateYield((0, _files.findRelativeConfig)(pkgData, context.envName, context.caller), \"t6\", 34);\n\n        case 34:\n          _yield = _context2.t6;\n          ignoreFile = _yield.ignore;\n          babelrcFile = _yield.config;\n\n          if (!(ignoreFile && shouldIgnore(context, ignoreFile.ignore, null, ignoreFile.dirname))) {\n            _context2.next = 39;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", null);\n\n        case 39:\n          if (!babelrcFile) {\n            _context2.next = 45;\n            break;\n          }\n\n          return _context2.delegateYield(loadFileChain(validateBabelrcFile(babelrcFile), context), \"t7\", 41);\n\n        case 41:\n          _result = _context2.t7;\n\n          if (_result) {\n            _context2.next = 44;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", null);\n\n        case 44:\n          mergeChain(fileChain, _result);\n\n        case 45:\n          chain = mergeChain(mergeChain(mergeChain(emptyChain(), configFileChain), fileChain), programmaticChain);\n          return _context2.abrupt(\"return\", {\n            plugins: dedupDescriptors(chain.plugins),\n            presets: dedupDescriptors(chain.presets),\n            options: chain.options.map(function (o) {\n              return normalizeOptions(o);\n            }),\n            ignore: ignoreFile || undefined,\n            babelrc: babelrcFile || undefined,\n            config: configFile || undefined\n          });\n\n        case 47:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n\nfunction babelrcLoadEnabled(context, pkgData, babelrcRoots, babelrcRootsDirectory) {\n  if (typeof babelrcRoots === \"boolean\") return babelrcRoots;\n  var absoluteRoot = context.root;\n\n  if (babelrcRoots === undefined) {\n    return pkgData.directories.indexOf(absoluteRoot) !== -1;\n  }\n\n  var babelrcPatterns = babelrcRoots;\n  if (!Array.isArray(babelrcPatterns)) babelrcPatterns = [babelrcPatterns];\n  babelrcPatterns = babelrcPatterns.map(function (pat) {\n    return typeof pat === \"string\" ? _path().default.resolve(babelrcRootsDirectory, pat) : pat;\n  });\n\n  if (babelrcPatterns.length === 1 && babelrcPatterns[0] === absoluteRoot) {\n    return pkgData.directories.indexOf(absoluteRoot) !== -1;\n  }\n\n  return babelrcPatterns.some(function (pat) {\n    if (typeof pat === \"string\") {\n      pat = (0, _patternToRegex.default)(pat, babelrcRootsDirectory);\n    }\n\n    return pkgData.directories.some(function (directory) {\n      return matchPattern(pat, babelrcRootsDirectory, directory, context);\n    });\n  });\n}\n\nvar validateConfigFile = (0, _caching.makeWeakCacheSync)(function (file) {\n  return {\n    filepath: file.filepath,\n    dirname: file.dirname,\n    options: (0, _options.validate)(\"configfile\", file.options)\n  };\n});\nvar validateBabelrcFile = (0, _caching.makeWeakCacheSync)(function (file) {\n  return {\n    filepath: file.filepath,\n    dirname: file.dirname,\n    options: (0, _options.validate)(\"babelrcfile\", file.options)\n  };\n});\nvar validateExtendFile = (0, _caching.makeWeakCacheSync)(function (file) {\n  return {\n    filepath: file.filepath,\n    dirname: file.dirname,\n    options: (0, _options.validate)(\"extendsfile\", file.options)\n  };\n});\nvar loadProgrammaticChain = makeChainWalker({\n  root: function root(input) {\n    return buildRootDescriptors(input, \"base\", _configDescriptors.createCachedDescriptors);\n  },\n  env: function env(input, envName) {\n    return buildEnvDescriptors(input, \"base\", _configDescriptors.createCachedDescriptors, envName);\n  },\n  overrides: function overrides(input, index) {\n    return buildOverrideDescriptors(input, \"base\", _configDescriptors.createCachedDescriptors, index);\n  },\n  overridesEnv: function overridesEnv(input, index, envName) {\n    return buildOverrideEnvDescriptors(input, \"base\", _configDescriptors.createCachedDescriptors, index, envName);\n  }\n});\nvar loadFileChain = makeChainWalker({\n  root: function root(file) {\n    return loadFileDescriptors(file);\n  },\n  env: function env(file, envName) {\n    return loadFileEnvDescriptors(file)(envName);\n  },\n  overrides: function overrides(file, index) {\n    return loadFileOverridesDescriptors(file)(index);\n  },\n  overridesEnv: function overridesEnv(file, index, envName) {\n    return loadFileOverridesEnvDescriptors(file)(index)(envName);\n  }\n});\nvar loadFileDescriptors = (0, _caching.makeWeakCacheSync)(function (file) {\n  return buildRootDescriptors(file, file.filepath, _configDescriptors.createUncachedDescriptors);\n});\nvar loadFileEnvDescriptors = (0, _caching.makeWeakCacheSync)(function (file) {\n  return (0, _caching.makeStrongCacheSync)(function (envName) {\n    return buildEnvDescriptors(file, file.filepath, _configDescriptors.createUncachedDescriptors, envName);\n  });\n});\nvar loadFileOverridesDescriptors = (0, _caching.makeWeakCacheSync)(function (file) {\n  return (0, _caching.makeStrongCacheSync)(function (index) {\n    return buildOverrideDescriptors(file, file.filepath, _configDescriptors.createUncachedDescriptors, index);\n  });\n});\nvar loadFileOverridesEnvDescriptors = (0, _caching.makeWeakCacheSync)(function (file) {\n  return (0, _caching.makeStrongCacheSync)(function (index) {\n    return (0, _caching.makeStrongCacheSync)(function (envName) {\n      return buildOverrideEnvDescriptors(file, file.filepath, _configDescriptors.createUncachedDescriptors, index, envName);\n    });\n  });\n});\n\nfunction buildRootDescriptors(_ref, alias, descriptors) {\n  var dirname = _ref.dirname,\n      options = _ref.options;\n  return descriptors(dirname, options, alias);\n}\n\nfunction buildEnvDescriptors(_ref2, alias, descriptors, envName) {\n  var dirname = _ref2.dirname,\n      options = _ref2.options;\n  var opts = options.env && options.env[envName];\n  return opts ? descriptors(dirname, opts, \"\".concat(alias, \".env[\\\"\").concat(envName, \"\\\"]\")) : null;\n}\n\nfunction buildOverrideDescriptors(_ref3, alias, descriptors, index) {\n  var dirname = _ref3.dirname,\n      options = _ref3.options;\n  var opts = options.overrides && options.overrides[index];\n  if (!opts) throw new Error(\"Assertion failure - missing override\");\n  return descriptors(dirname, opts, \"\".concat(alias, \".overrides[\").concat(index, \"]\"));\n}\n\nfunction buildOverrideEnvDescriptors(_ref4, alias, descriptors, index, envName) {\n  var dirname = _ref4.dirname,\n      options = _ref4.options;\n  var override = options.overrides && options.overrides[index];\n  if (!override) throw new Error(\"Assertion failure - missing override\");\n  var opts = override.env && override.env[envName];\n  return opts ? descriptors(dirname, opts, \"\".concat(alias, \".overrides[\").concat(index, \"].env[\\\"\").concat(envName, \"\\\"]\")) : null;\n}\n\nfunction makeChainWalker(_ref5) {\n  var root = _ref5.root,\n      env = _ref5.env,\n      overrides = _ref5.overrides,\n      overridesEnv = _ref5.overridesEnv;\n  return /*#__PURE__*/_regeneratorRuntime.mark(function _callee(input, context) {\n    var files,\n        dirname,\n        flattenedConfigs,\n        rootOpts,\n        envOpts,\n        chain,\n        _i,\n        _flattenedConfigs,\n        op,\n        _args3 = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            files = _args3.length > 2 && _args3[2] !== undefined ? _args3[2] : new Set();\n            dirname = input.dirname;\n            flattenedConfigs = [];\n            rootOpts = root(input);\n\n            if (configIsApplicable(rootOpts, dirname, context)) {\n              flattenedConfigs.push(rootOpts);\n              envOpts = env(input, context.envName);\n\n              if (envOpts && configIsApplicable(envOpts, dirname, context)) {\n                flattenedConfigs.push(envOpts);\n              }\n\n              (rootOpts.options.overrides || []).forEach(function (_, index) {\n                var overrideOps = overrides(input, index);\n\n                if (configIsApplicable(overrideOps, dirname, context)) {\n                  flattenedConfigs.push(overrideOps);\n                  var overrideEnvOpts = overridesEnv(input, index, context.envName);\n\n                  if (overrideEnvOpts && configIsApplicable(overrideEnvOpts, dirname, context)) {\n                    flattenedConfigs.push(overrideEnvOpts);\n                  }\n                }\n              });\n            }\n\n            if (!flattenedConfigs.some(function (_ref6) {\n              var _ref6$options = _ref6.options,\n                  ignore = _ref6$options.ignore,\n                  only = _ref6$options.only;\n              return shouldIgnore(context, ignore, only, dirname);\n            })) {\n              _context3.next = 7;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", null);\n\n          case 7:\n            chain = emptyChain();\n            _i = 0, _flattenedConfigs = flattenedConfigs;\n\n          case 9:\n            if (!(_i < _flattenedConfigs.length)) {\n              _context3.next = 18;\n              break;\n            }\n\n            op = _flattenedConfigs[_i];\n            return _context3.delegateYield(mergeExtendsChain(chain, op.options, dirname, context, files), \"t0\", 12);\n\n          case 12:\n            if (_context3.t0) {\n              _context3.next = 14;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", null);\n\n          case 14:\n            mergeChainOpts(chain, op);\n\n          case 15:\n            _i++;\n            _context3.next = 9;\n            break;\n\n          case 18:\n            return _context3.abrupt(\"return\", chain);\n\n          case 19:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee);\n  });\n}\n\nfunction mergeExtendsChain(chain, opts, dirname, context, files) {\n  var file, fileChain;\n  return _regeneratorRuntime.wrap(function mergeExtendsChain$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          if (!(opts.extends === undefined)) {\n            _context4.next = 2;\n            break;\n          }\n\n          return _context4.abrupt(\"return\", true);\n\n        case 2:\n          return _context4.delegateYield((0, _files.loadConfig)(opts.extends, dirname, context.envName, context.caller), \"t0\", 3);\n\n        case 3:\n          file = _context4.t0;\n\n          if (!files.has(file)) {\n            _context4.next = 6;\n            break;\n          }\n\n          throw new Error(\"Configuration cycle detected loading \".concat(file.filepath, \".\\n\") + \"File already loaded following the config chain:\\n\" + Array.from(files, function (file) {\n            return \" - \".concat(file.filepath);\n          }).join(\"\\n\"));\n\n        case 6:\n          files.add(file);\n          return _context4.delegateYield(loadFileChain(validateExtendFile(file), context, files), \"t1\", 8);\n\n        case 8:\n          fileChain = _context4.t1;\n          files.delete(file);\n\n          if (fileChain) {\n            _context4.next = 12;\n            break;\n          }\n\n          return _context4.abrupt(\"return\", false);\n\n        case 12:\n          mergeChain(chain, fileChain);\n          return _context4.abrupt(\"return\", true);\n\n        case 14:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked3);\n}\n\nfunction mergeChain(target, source) {\n  var _target$options, _target$plugins, _target$presets;\n\n  (_target$options = target.options).push.apply(_target$options, _toConsumableArray(source.options));\n\n  (_target$plugins = target.plugins).push.apply(_target$plugins, _toConsumableArray(source.plugins));\n\n  (_target$presets = target.presets).push.apply(_target$presets, _toConsumableArray(source.presets));\n\n  return target;\n}\n\nfunction mergeChainOpts(target, _ref7) {\n  var _target$plugins2, _target$presets2;\n\n  var options = _ref7.options,\n      plugins = _ref7.plugins,\n      presets = _ref7.presets;\n  target.options.push(options);\n\n  (_target$plugins2 = target.plugins).push.apply(_target$plugins2, _toConsumableArray(plugins()));\n\n  (_target$presets2 = target.presets).push.apply(_target$presets2, _toConsumableArray(presets()));\n\n  return target;\n}\n\nfunction emptyChain() {\n  return {\n    options: [],\n    presets: [],\n    plugins: []\n  };\n}\n\nfunction normalizeOptions(opts) {\n  var options = Object.assign({}, opts);\n  delete options.extends;\n  delete options.env;\n  delete options.overrides;\n  delete options.plugins;\n  delete options.presets;\n  delete options.passPerPreset;\n  delete options.ignore;\n  delete options.only;\n  delete options.test;\n  delete options.include;\n  delete options.exclude;\n\n  if (Object.prototype.hasOwnProperty.call(options, \"sourceMap\")) {\n    options.sourceMaps = options.sourceMap;\n    delete options.sourceMap;\n  }\n\n  return options;\n}\n\nfunction dedupDescriptors(items) {\n  var map = new Map();\n  var descriptors = [];\n\n  var _iterator = _createForOfIteratorHelper(items),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var item = _step.value;\n\n      if (typeof item.value === \"function\") {\n        var fnKey = item.value;\n        var nameMap = map.get(fnKey);\n\n        if (!nameMap) {\n          nameMap = new Map();\n          map.set(fnKey, nameMap);\n        }\n\n        var desc = nameMap.get(item.name);\n\n        if (!desc) {\n          desc = {\n            value: item\n          };\n          descriptors.push(desc);\n          if (!item.ownPass) nameMap.set(item.name, desc);\n        } else {\n          desc.value = item;\n        }\n      } else {\n        descriptors.push({\n          value: item\n        });\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return descriptors.reduce(function (acc, desc) {\n    acc.push(desc.value);\n    return acc;\n  }, []);\n}\n\nfunction configIsApplicable(_ref8, dirname, context) {\n  var options = _ref8.options;\n  return (options.test === undefined || configFieldIsApplicable(context, options.test, dirname)) && (options.include === undefined || configFieldIsApplicable(context, options.include, dirname)) && (options.exclude === undefined || !configFieldIsApplicable(context, options.exclude, dirname));\n}\n\nfunction configFieldIsApplicable(context, test, dirname) {\n  var patterns = Array.isArray(test) ? test : [test];\n  return matchesPatterns(context, patterns, dirname);\n}\n\nfunction shouldIgnore(context, ignore, only, dirname) {\n  if (ignore && matchesPatterns(context, ignore, dirname)) {\n    debug(\"Ignored %o because it matched one of %O from %o\", context.filename, ignore, dirname);\n    return true;\n  }\n\n  if (only && !matchesPatterns(context, only, dirname)) {\n    debug(\"Ignored %o because it failed to match one of %O from %o\", context.filename, only, dirname);\n    return true;\n  }\n\n  return false;\n}\n\nfunction matchesPatterns(context, patterns, dirname) {\n  return patterns.some(function (pattern) {\n    return matchPattern(pattern, dirname, context.filename, context);\n  });\n}\n\nfunction matchPattern(pattern, dirname, pathToTest, context) {\n  if (typeof pattern === \"function\") {\n    return !!pattern(pathToTest, {\n      dirname: dirname,\n      envName: context.envName,\n      caller: context.caller\n    });\n  }\n\n  if (typeof pathToTest !== \"string\") {\n    throw new Error(\"Configuration contains string/RegExp pattern, but no filename was passed to Babel\");\n  }\n\n  if (typeof pattern === \"string\") {\n    pattern = (0, _patternToRegex.default)(pattern, dirname);\n  }\n\n  return pattern.test(pathToTest);\n}","map":{"version":3,"sources":["/OpenCerts/demo-opencerts-renderer/node_modules/@babel/core/lib/config/config-chain.js"],"names":["buildPresetChain","buildRootChain","mergeExtendsChain","Object","defineProperty","exports","value","buildPresetChainWalker","_path","data","_interopRequireDefault","require","_debug","_options","_patternToRegex","_files","_caching","_configDescriptors","obj","__esModule","default","debug","arg","context","chain","plugins","dedupDescriptors","presets","options","map","o","normalizeOptions","makeChainWalker","init","root","preset","loadPresetDescriptors","env","envName","loadPresetEnvDescriptors","overrides","index","loadPresetOverridesDescriptors","overridesEnv","loadPresetOverridesEnvDescriptors","makeWeakCacheSync","buildRootDescriptors","alias","createUncachedDescriptors","makeStrongCacheSync","buildEnvDescriptors","buildOverrideDescriptors","buildOverrideEnvDescriptors","opts","loadProgrammaticChain","dirname","cwd","programmaticChain","configFile","loadConfig","caller","findRootConfig","babelrc","babelrcRoots","babelrcRootsDirectory","configFileChain","emptyChain","validatedFile","validateConfigFile","loadFileChain","result","undefined","mergeChain","filename","findPackageData","pkgData","fileChain","babelrcLoadEnabled","findRelativeConfig","ignoreFile","ignore","babelrcFile","config","shouldIgnore","validateBabelrcFile","absoluteRoot","directories","indexOf","babelrcPatterns","Array","isArray","pat","resolve","length","some","directory","matchPattern","file","filepath","validate","validateExtendFile","input","createCachedDescriptors","loadFileDescriptors","loadFileEnvDescriptors","loadFileOverridesDescriptors","loadFileOverridesEnvDescriptors","descriptors","Error","override","files","Set","flattenedConfigs","rootOpts","configIsApplicable","push","envOpts","forEach","_","overrideOps","overrideEnvOpts","only","op","mergeChainOpts","extends","has","from","join","add","delete","target","source","assign","passPerPreset","test","include","exclude","prototype","hasOwnProperty","call","sourceMaps","sourceMap","items","Map","item","fnKey","nameMap","get","set","desc","name","ownPass","reduce","acc","configFieldIsApplicable","patterns","matchesPatterns","pattern","pathToTest"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.buildPresetChain = buildPresetChain;\nexports.buildRootChain = buildRootChain;\nexports.buildPresetChainWalker = void 0;\n\nfunction _path() {\n  const data = _interopRequireDefault(require(\"path\"));\n\n  _path = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _debug() {\n  const data = _interopRequireDefault(require(\"debug\"));\n\n  _debug = function () {\n    return data;\n  };\n\n  return data;\n}\n\nvar _options = require(\"./validation/options\");\n\nvar _patternToRegex = _interopRequireDefault(require(\"./pattern-to-regex\"));\n\nvar _files = require(\"./files\");\n\nvar _caching = require(\"./caching\");\n\nvar _configDescriptors = require(\"./config-descriptors\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst debug = (0, _debug().default)(\"babel:config:config-chain\");\n\nfunction* buildPresetChain(arg, context) {\n  const chain = yield* buildPresetChainWalker(arg, context);\n  if (!chain) return null;\n  return {\n    plugins: dedupDescriptors(chain.plugins),\n    presets: dedupDescriptors(chain.presets),\n    options: chain.options.map(o => normalizeOptions(o))\n  };\n}\n\nconst buildPresetChainWalker = makeChainWalker({\n  init: arg => arg,\n  root: preset => loadPresetDescriptors(preset),\n  env: (preset, envName) => loadPresetEnvDescriptors(preset)(envName),\n  overrides: (preset, index) => loadPresetOverridesDescriptors(preset)(index),\n  overridesEnv: (preset, index, envName) => loadPresetOverridesEnvDescriptors(preset)(index)(envName)\n});\nexports.buildPresetChainWalker = buildPresetChainWalker;\nconst loadPresetDescriptors = (0, _caching.makeWeakCacheSync)(preset => buildRootDescriptors(preset, preset.alias, _configDescriptors.createUncachedDescriptors));\nconst loadPresetEnvDescriptors = (0, _caching.makeWeakCacheSync)(preset => (0, _caching.makeStrongCacheSync)(envName => buildEnvDescriptors(preset, preset.alias, _configDescriptors.createUncachedDescriptors, envName)));\nconst loadPresetOverridesDescriptors = (0, _caching.makeWeakCacheSync)(preset => (0, _caching.makeStrongCacheSync)(index => buildOverrideDescriptors(preset, preset.alias, _configDescriptors.createUncachedDescriptors, index)));\nconst loadPresetOverridesEnvDescriptors = (0, _caching.makeWeakCacheSync)(preset => (0, _caching.makeStrongCacheSync)(index => (0, _caching.makeStrongCacheSync)(envName => buildOverrideEnvDescriptors(preset, preset.alias, _configDescriptors.createUncachedDescriptors, index, envName))));\n\nfunction* buildRootChain(opts, context) {\n  const programmaticChain = yield* loadProgrammaticChain({\n    options: opts,\n    dirname: context.cwd\n  }, context);\n  if (!programmaticChain) return null;\n  let configFile;\n\n  if (typeof opts.configFile === \"string\") {\n    configFile = yield* (0, _files.loadConfig)(opts.configFile, context.cwd, context.envName, context.caller);\n  } else if (opts.configFile !== false) {\n    configFile = yield* (0, _files.findRootConfig)(context.root, context.envName, context.caller);\n  }\n\n  let {\n    babelrc,\n    babelrcRoots\n  } = opts;\n  let babelrcRootsDirectory = context.cwd;\n  const configFileChain = emptyChain();\n\n  if (configFile) {\n    const validatedFile = validateConfigFile(configFile);\n    const result = yield* loadFileChain(validatedFile, context);\n    if (!result) return null;\n\n    if (babelrc === undefined) {\n      babelrc = validatedFile.options.babelrc;\n    }\n\n    if (babelrcRoots === undefined) {\n      babelrcRootsDirectory = validatedFile.dirname;\n      babelrcRoots = validatedFile.options.babelrcRoots;\n    }\n\n    mergeChain(configFileChain, result);\n  }\n\n  const pkgData = typeof context.filename === \"string\" ? yield* (0, _files.findPackageData)(context.filename) : null;\n  let ignoreFile, babelrcFile;\n  const fileChain = emptyChain();\n\n  if ((babelrc === true || babelrc === undefined) && pkgData && babelrcLoadEnabled(context, pkgData, babelrcRoots, babelrcRootsDirectory)) {\n    ({\n      ignore: ignoreFile,\n      config: babelrcFile\n    } = yield* (0, _files.findRelativeConfig)(pkgData, context.envName, context.caller));\n\n    if (ignoreFile && shouldIgnore(context, ignoreFile.ignore, null, ignoreFile.dirname)) {\n      return null;\n    }\n\n    if (babelrcFile) {\n      const result = yield* loadFileChain(validateBabelrcFile(babelrcFile), context);\n      if (!result) return null;\n      mergeChain(fileChain, result);\n    }\n  }\n\n  const chain = mergeChain(mergeChain(mergeChain(emptyChain(), configFileChain), fileChain), programmaticChain);\n  return {\n    plugins: dedupDescriptors(chain.plugins),\n    presets: dedupDescriptors(chain.presets),\n    options: chain.options.map(o => normalizeOptions(o)),\n    ignore: ignoreFile || undefined,\n    babelrc: babelrcFile || undefined,\n    config: configFile || undefined\n  };\n}\n\nfunction babelrcLoadEnabled(context, pkgData, babelrcRoots, babelrcRootsDirectory) {\n  if (typeof babelrcRoots === \"boolean\") return babelrcRoots;\n  const absoluteRoot = context.root;\n\n  if (babelrcRoots === undefined) {\n    return pkgData.directories.indexOf(absoluteRoot) !== -1;\n  }\n\n  let babelrcPatterns = babelrcRoots;\n  if (!Array.isArray(babelrcPatterns)) babelrcPatterns = [babelrcPatterns];\n  babelrcPatterns = babelrcPatterns.map(pat => {\n    return typeof pat === \"string\" ? _path().default.resolve(babelrcRootsDirectory, pat) : pat;\n  });\n\n  if (babelrcPatterns.length === 1 && babelrcPatterns[0] === absoluteRoot) {\n    return pkgData.directories.indexOf(absoluteRoot) !== -1;\n  }\n\n  return babelrcPatterns.some(pat => {\n    if (typeof pat === \"string\") {\n      pat = (0, _patternToRegex.default)(pat, babelrcRootsDirectory);\n    }\n\n    return pkgData.directories.some(directory => {\n      return matchPattern(pat, babelrcRootsDirectory, directory, context);\n    });\n  });\n}\n\nconst validateConfigFile = (0, _caching.makeWeakCacheSync)(file => ({\n  filepath: file.filepath,\n  dirname: file.dirname,\n  options: (0, _options.validate)(\"configfile\", file.options)\n}));\nconst validateBabelrcFile = (0, _caching.makeWeakCacheSync)(file => ({\n  filepath: file.filepath,\n  dirname: file.dirname,\n  options: (0, _options.validate)(\"babelrcfile\", file.options)\n}));\nconst validateExtendFile = (0, _caching.makeWeakCacheSync)(file => ({\n  filepath: file.filepath,\n  dirname: file.dirname,\n  options: (0, _options.validate)(\"extendsfile\", file.options)\n}));\nconst loadProgrammaticChain = makeChainWalker({\n  root: input => buildRootDescriptors(input, \"base\", _configDescriptors.createCachedDescriptors),\n  env: (input, envName) => buildEnvDescriptors(input, \"base\", _configDescriptors.createCachedDescriptors, envName),\n  overrides: (input, index) => buildOverrideDescriptors(input, \"base\", _configDescriptors.createCachedDescriptors, index),\n  overridesEnv: (input, index, envName) => buildOverrideEnvDescriptors(input, \"base\", _configDescriptors.createCachedDescriptors, index, envName)\n});\nconst loadFileChain = makeChainWalker({\n  root: file => loadFileDescriptors(file),\n  env: (file, envName) => loadFileEnvDescriptors(file)(envName),\n  overrides: (file, index) => loadFileOverridesDescriptors(file)(index),\n  overridesEnv: (file, index, envName) => loadFileOverridesEnvDescriptors(file)(index)(envName)\n});\nconst loadFileDescriptors = (0, _caching.makeWeakCacheSync)(file => buildRootDescriptors(file, file.filepath, _configDescriptors.createUncachedDescriptors));\nconst loadFileEnvDescriptors = (0, _caching.makeWeakCacheSync)(file => (0, _caching.makeStrongCacheSync)(envName => buildEnvDescriptors(file, file.filepath, _configDescriptors.createUncachedDescriptors, envName)));\nconst loadFileOverridesDescriptors = (0, _caching.makeWeakCacheSync)(file => (0, _caching.makeStrongCacheSync)(index => buildOverrideDescriptors(file, file.filepath, _configDescriptors.createUncachedDescriptors, index)));\nconst loadFileOverridesEnvDescriptors = (0, _caching.makeWeakCacheSync)(file => (0, _caching.makeStrongCacheSync)(index => (0, _caching.makeStrongCacheSync)(envName => buildOverrideEnvDescriptors(file, file.filepath, _configDescriptors.createUncachedDescriptors, index, envName))));\n\nfunction buildRootDescriptors({\n  dirname,\n  options\n}, alias, descriptors) {\n  return descriptors(dirname, options, alias);\n}\n\nfunction buildEnvDescriptors({\n  dirname,\n  options\n}, alias, descriptors, envName) {\n  const opts = options.env && options.env[envName];\n  return opts ? descriptors(dirname, opts, `${alias}.env[\"${envName}\"]`) : null;\n}\n\nfunction buildOverrideDescriptors({\n  dirname,\n  options\n}, alias, descriptors, index) {\n  const opts = options.overrides && options.overrides[index];\n  if (!opts) throw new Error(\"Assertion failure - missing override\");\n  return descriptors(dirname, opts, `${alias}.overrides[${index}]`);\n}\n\nfunction buildOverrideEnvDescriptors({\n  dirname,\n  options\n}, alias, descriptors, index, envName) {\n  const override = options.overrides && options.overrides[index];\n  if (!override) throw new Error(\"Assertion failure - missing override\");\n  const opts = override.env && override.env[envName];\n  return opts ? descriptors(dirname, opts, `${alias}.overrides[${index}].env[\"${envName}\"]`) : null;\n}\n\nfunction makeChainWalker({\n  root,\n  env,\n  overrides,\n  overridesEnv\n}) {\n  return function* (input, context, files = new Set()) {\n    const {\n      dirname\n    } = input;\n    const flattenedConfigs = [];\n    const rootOpts = root(input);\n\n    if (configIsApplicable(rootOpts, dirname, context)) {\n      flattenedConfigs.push(rootOpts);\n      const envOpts = env(input, context.envName);\n\n      if (envOpts && configIsApplicable(envOpts, dirname, context)) {\n        flattenedConfigs.push(envOpts);\n      }\n\n      (rootOpts.options.overrides || []).forEach((_, index) => {\n        const overrideOps = overrides(input, index);\n\n        if (configIsApplicable(overrideOps, dirname, context)) {\n          flattenedConfigs.push(overrideOps);\n          const overrideEnvOpts = overridesEnv(input, index, context.envName);\n\n          if (overrideEnvOpts && configIsApplicable(overrideEnvOpts, dirname, context)) {\n            flattenedConfigs.push(overrideEnvOpts);\n          }\n        }\n      });\n    }\n\n    if (flattenedConfigs.some(({\n      options: {\n        ignore,\n        only\n      }\n    }) => shouldIgnore(context, ignore, only, dirname))) {\n      return null;\n    }\n\n    const chain = emptyChain();\n\n    for (const op of flattenedConfigs) {\n      if (!(yield* mergeExtendsChain(chain, op.options, dirname, context, files))) {\n        return null;\n      }\n\n      mergeChainOpts(chain, op);\n    }\n\n    return chain;\n  };\n}\n\nfunction* mergeExtendsChain(chain, opts, dirname, context, files) {\n  if (opts.extends === undefined) return true;\n  const file = yield* (0, _files.loadConfig)(opts.extends, dirname, context.envName, context.caller);\n\n  if (files.has(file)) {\n    throw new Error(`Configuration cycle detected loading ${file.filepath}.\\n` + `File already loaded following the config chain:\\n` + Array.from(files, file => ` - ${file.filepath}`).join(\"\\n\"));\n  }\n\n  files.add(file);\n  const fileChain = yield* loadFileChain(validateExtendFile(file), context, files);\n  files.delete(file);\n  if (!fileChain) return false;\n  mergeChain(chain, fileChain);\n  return true;\n}\n\nfunction mergeChain(target, source) {\n  target.options.push(...source.options);\n  target.plugins.push(...source.plugins);\n  target.presets.push(...source.presets);\n  return target;\n}\n\nfunction mergeChainOpts(target, {\n  options,\n  plugins,\n  presets\n}) {\n  target.options.push(options);\n  target.plugins.push(...plugins());\n  target.presets.push(...presets());\n  return target;\n}\n\nfunction emptyChain() {\n  return {\n    options: [],\n    presets: [],\n    plugins: []\n  };\n}\n\nfunction normalizeOptions(opts) {\n  const options = Object.assign({}, opts);\n  delete options.extends;\n  delete options.env;\n  delete options.overrides;\n  delete options.plugins;\n  delete options.presets;\n  delete options.passPerPreset;\n  delete options.ignore;\n  delete options.only;\n  delete options.test;\n  delete options.include;\n  delete options.exclude;\n\n  if (Object.prototype.hasOwnProperty.call(options, \"sourceMap\")) {\n    options.sourceMaps = options.sourceMap;\n    delete options.sourceMap;\n  }\n\n  return options;\n}\n\nfunction dedupDescriptors(items) {\n  const map = new Map();\n  const descriptors = [];\n\n  for (const item of items) {\n    if (typeof item.value === \"function\") {\n      const fnKey = item.value;\n      let nameMap = map.get(fnKey);\n\n      if (!nameMap) {\n        nameMap = new Map();\n        map.set(fnKey, nameMap);\n      }\n\n      let desc = nameMap.get(item.name);\n\n      if (!desc) {\n        desc = {\n          value: item\n        };\n        descriptors.push(desc);\n        if (!item.ownPass) nameMap.set(item.name, desc);\n      } else {\n        desc.value = item;\n      }\n    } else {\n      descriptors.push({\n        value: item\n      });\n    }\n  }\n\n  return descriptors.reduce((acc, desc) => {\n    acc.push(desc.value);\n    return acc;\n  }, []);\n}\n\nfunction configIsApplicable({\n  options\n}, dirname, context) {\n  return (options.test === undefined || configFieldIsApplicable(context, options.test, dirname)) && (options.include === undefined || configFieldIsApplicable(context, options.include, dirname)) && (options.exclude === undefined || !configFieldIsApplicable(context, options.exclude, dirname));\n}\n\nfunction configFieldIsApplicable(context, test, dirname) {\n  const patterns = Array.isArray(test) ? test : [test];\n  return matchesPatterns(context, patterns, dirname);\n}\n\nfunction shouldIgnore(context, ignore, only, dirname) {\n  if (ignore && matchesPatterns(context, ignore, dirname)) {\n    debug(\"Ignored %o because it matched one of %O from %o\", context.filename, ignore, dirname);\n    return true;\n  }\n\n  if (only && !matchesPatterns(context, only, dirname)) {\n    debug(\"Ignored %o because it failed to match one of %O from %o\", context.filename, only, dirname);\n    return true;\n  }\n\n  return false;\n}\n\nfunction matchesPatterns(context, patterns, dirname) {\n  return patterns.some(pattern => matchPattern(pattern, dirname, context.filename, context));\n}\n\nfunction matchPattern(pattern, dirname, pathToTest, context) {\n  if (typeof pattern === \"function\") {\n    return !!pattern(pathToTest, {\n      dirname,\n      envName: context.envName,\n      caller: context.caller\n    });\n  }\n\n  if (typeof pathToTest !== \"string\") {\n    throw new Error(`Configuration contains string/RegExp pattern, but no filename was passed to Babel`);\n  }\n\n  if (typeof pattern === \"string\") {\n    pattern = (0, _patternToRegex.default)(pattern, dirname);\n  }\n\n  return pattern.test(pathToTest);\n}"]},"metadata":{},"sourceType":"script"}