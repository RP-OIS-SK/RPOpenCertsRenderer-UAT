{"ast":null,"code":"var _jsxFileName = \"/Users/Shared/opencerts/UAT-opencerts-renderer/src/components/attachmentTemplates/pdfRenderer/index.js\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { range } from \"lodash\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\nimport style from \"./pdfRenderer.module.scss\"; // https://github.com/wojtekmaj/react-pdf#browserify-and-others\n\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\nexport default class PdfRenderer extends Component {\n  constructor(props) {\n    super(props);\n    this.onDocumentLoadSuccess = this.onDocumentLoadSuccess.bind(this);\n    this.onPageLoadSuccess = this.onPageLoadSuccess.bind(this);\n    this.state = {\n      numPages: null\n    };\n  }\n\n  onDocumentLoadSuccess({\n    numPages\n  }) {\n    this.setState({\n      numPages\n    });\n    this.props.handleHeightUpdate(document.documentElement.offsetHeight);\n  }\n\n  onPageLoadSuccess() {\n    this.props.handleHeightUpdate(document.documentElement.offsetHeight);\n  }\n\n  render() {\n    const {\n      data\n    } = this.props.attachment;\n    const {\n      numPages\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Document, {\n      className: \"container\",\n      file: `data:application/pdf;base64,${data}`,\n      onLoadSuccess: this.onDocumentLoadSuccess,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 7\n      }\n    }, range(numPages).map(index =>\n    /*#__PURE__*/\n    // TODO: Dynamically resize width to fit container\n    // https://github.com/wojtekmaj/react-pdf/issues/129\n    React.createElement(Page, {\n      className: style.page,\n      key: `page_${index + 1}`,\n      pageNumber: index + 1,\n      onLoadSuccess: this.onPageLoadSuccess,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\nPdfRenderer.propTypes = {\n  attachment: PropTypes.shape({\n    data: PropTypes.string.isRequired\n  }).isRequired,\n  handleHeightUpdate: PropTypes.func.isRequired\n};","map":{"version":3,"sources":["/Users/Shared/opencerts/UAT-opencerts-renderer/src/components/attachmentTemplates/pdfRenderer/index.js"],"names":["React","Component","PropTypes","range","Document","Page","pdfjs","style","GlobalWorkerOptions","workerSrc","version","PdfRenderer","constructor","props","onDocumentLoadSuccess","bind","onPageLoadSuccess","state","numPages","setState","handleHeightUpdate","document","documentElement","offsetHeight","render","data","attachment","map","index","page","propTypes","shape","string","isRequired","func"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,KAAT,QAAsB,QAAtB;AACA,SAASC,QAAT,EAAmBC,IAAnB,EAAyBC,KAAzB,QAAsC,WAAtC;AACA,OAAOC,KAAP,MAAkB,2BAAlB,C,CAEA;;AACAD,KAAK,CAACE,mBAAN,CAA0BC,SAA1B,GAAuC,2CAA0CH,KAAK,CAACI,OAAQ,gBAA/F;AAEA,eAAe,MAAMC,WAAN,SAA0BV,SAA1B,CAAoC;AACjDW,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,qBAAL,GAA6B,KAAKA,qBAAL,CAA2BC,IAA3B,CAAgC,IAAhC,CAA7B;AACA,SAAKC,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBD,IAAvB,CAA4B,IAA5B,CAAzB;AAEA,SAAKE,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAE;AADC,KAAb;AAGD;;AAEDJ,EAAAA,qBAAqB,CAAC;AAAEI,IAAAA;AAAF,GAAD,EAAe;AAClC,SAAKC,QAAL,CAAc;AAAED,MAAAA;AAAF,KAAd;AACA,SAAKL,KAAL,CAAWO,kBAAX,CAA8BC,QAAQ,CAACC,eAAT,CAAyBC,YAAvD;AACD;;AAEDP,EAAAA,iBAAiB,GAAG;AAClB,SAAKH,KAAL,CAAWO,kBAAX,CAA8BC,QAAQ,CAACC,eAAT,CAAyBC,YAAvD;AACD;;AAEDC,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEC,MAAAA;AAAF,QAAW,KAAKZ,KAAL,CAAWa,UAA5B;AACA,UAAM;AAAER,MAAAA;AAAF,QAAe,KAAKD,KAA1B;AAEA,wBACE,oBAAC,QAAD;AACE,MAAA,SAAS,EAAC,WADZ;AAEE,MAAA,IAAI,EAAG,+BAA8BQ,IAAK,EAF5C;AAGE,MAAA,aAAa,EAAE,KAAKX,qBAHtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKGX,KAAK,CAACe,QAAD,CAAL,CAAgBS,GAAhB,CAAoBC,KAAK;AAAA;AACxB;AACA;AACA,wBAAC,IAAD;AACE,MAAA,SAAS,EAAErB,KAAK,CAACsB,IADnB;AAEE,MAAA,GAAG,EAAG,QAAOD,KAAK,GAAG,CAAE,EAFzB;AAGE,MAAA,UAAU,EAAEA,KAAK,GAAG,CAHtB;AAIE,MAAA,aAAa,EAAE,KAAKZ,iBAJtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHD,CALH,CADF;AAkBD;;AA1CgD;AA6CnDL,WAAW,CAACmB,SAAZ,GAAwB;AACtBJ,EAAAA,UAAU,EAAExB,SAAS,CAAC6B,KAAV,CAAgB;AAC1BN,IAAAA,IAAI,EAAEvB,SAAS,CAAC8B,MAAV,CAAiBC;AADG,GAAhB,EAETA,UAHmB;AAItBb,EAAAA,kBAAkB,EAAElB,SAAS,CAACgC,IAAV,CAAeD;AAJb,CAAxB","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { range } from \"lodash\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\nimport style from \"./pdfRenderer.module.scss\";\n\n// https://github.com/wojtekmaj/react-pdf#browserify-and-others\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\n\nexport default class PdfRenderer extends Component {\n  constructor(props) {\n    super(props);\n    this.onDocumentLoadSuccess = this.onDocumentLoadSuccess.bind(this);\n    this.onPageLoadSuccess = this.onPageLoadSuccess.bind(this);\n\n    this.state = {\n      numPages: null\n    };\n  }\n\n  onDocumentLoadSuccess({ numPages }) {\n    this.setState({ numPages });\n    this.props.handleHeightUpdate(document.documentElement.offsetHeight);\n  }\n\n  onPageLoadSuccess() {\n    this.props.handleHeightUpdate(document.documentElement.offsetHeight);\n  }\n\n  render() {\n    const { data } = this.props.attachment;\n    const { numPages } = this.state;\n\n    return (\n      <Document\n        className=\"container\"\n        file={`data:application/pdf;base64,${data}`}\n        onLoadSuccess={this.onDocumentLoadSuccess}\n      >\n        {range(numPages).map(index => (\n          // TODO: Dynamically resize width to fit container\n          // https://github.com/wojtekmaj/react-pdf/issues/129\n          <Page\n            className={style.page}\n            key={`page_${index + 1}`}\n            pageNumber={index + 1}\n            onLoadSuccess={this.onPageLoadSuccess}\n          />\n        ))}\n      </Document>\n    );\n  }\n}\n\nPdfRenderer.propTypes = {\n  attachment: PropTypes.shape({\n    data: PropTypes.string.isRequired\n  }).isRequired,\n  handleHeightUpdate: PropTypes.func.isRequired\n};\n"]},"metadata":{},"sourceType":"module"}